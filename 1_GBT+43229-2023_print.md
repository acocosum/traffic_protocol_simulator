ICS 93.080.30

CCS R 85

<!-- B -->
![](./images/06ee7febd683ad19.jpg)

中华人民共和国国家标准

GB/T 43229-2023

# 交通信号控制机与车辆检测器间

# 通信协议

# Communication protocol between road traffic signal controller and

# vehicle detectors

2023-09-07 发布 2024-04-01 实施

国家市场监督管理总局

发布

国家标准化管理委员会

<!-- GB/T 43229-2023 -->

# 目 次

前言...........................................................................I

1 范围.........................................................................1

2 规范性引用文件................................................................1

3 术语和定义...................................................................1

4 缩略语.......................................................................1

5 通则.........................................................................1

6 信息格式.....................................................................2

7 通信规程.....................................................................5

8 消息内容.....................................................................5

附录A（规范性）通信规程........................................................8

附录B（规范性）信息格式.........................................................9

附录C（资料性）交通信号控制机与行人检测器间通信协议..............................30

参考文献.......................................................................34

<!-- **GB/T 43229-2023** -->

# 前 言

本文件按照GB/T 1.1-2020《标准化工作导则 第1部分：标准化文件的结构和起草规则》的规定起草。

请注意本文件的某些内容可能涉及专利。本文件的发布机构不承担识别专利的责任。

本文件由中华人民共和国公安部提出。

本文件由全国道路交通管理标准化技术委员会（SAC/TC 576）归口。

本文件起草单位：公安部交通管理科学研究所、无锡华通智能交通技术开发有限公司、青岛海信网络科技股份有限公司、深圳市新创中天信息科技发展有限公司、南京慧尔视智能科技有限公司、南京蓝泰交通设施有限责任公司。

本文件主要起草人：刘东波、树爱兵、何广进、杨光、徐棱、刘成生、陈维强、沈标、周长军、陈俊德。


![](./images/3b0af40729aec035.jpg)

<!-- I -->

<!-- **GB/T** 43229-2023 -->

# 交通信号控制机与车辆检测器间

# 通信协议

## 1 范围

本文件规定了道路交通信号控制机与车辆检测器间通信的通则、信息格式、通信规程和消息内容。

本文件适用于道路交通信号控制机与机动车检测器、非机动车检测器之间的通信，道路交通信号控制机与行人检测器间的通信参照执行。

## 2 规范性引用文件

下列文件中内容通过文中的规范性引用而构成本文件必不可少的条款。其中，注日期的引用文件，仅该日期对应的版本适用于本文件；不注日期的引用文件，其最新版本（包括所有的修改单）适用于本文件。

GB/T 2260 中华人民共和国行政区划代码

GB/T 2312 信息交换用汉字编码字符集 基本集

GB/T 31418 道路交通信号控制系统术语

GB/T 35789.1-2017 机动车电子标识通用规范 第1部分：汽车

GA/T 16.4 道路交通管理信息代码 第4部分：机动车车辆类型代码

GA/T 16.7 道路交通管理信息代码 第7部分：机动车号牌种类代码

GA/T 543.5 公安数据元（5）

## 3 术语和定义

GB/T 31418界定的术语和定义适用于本文件。

## 4 缩略语

下列缩略语适用于本文件。

CRC：循环冗余码校验（Cyclical Redundancy Check）

IP：网际协议（Internet Protocol）

TCP：传输控制协议（Transmission Control Protocol）

UDP：用户数据报协议（User Datagram Protocol）

UTC：协调世界时（Coordinated Universal Time）

## 5 通则

### 5.1 通信模型

采用四层模型，包括物理层、网络层、传输层与应用层。

<!-- 1 -->

<!-- **GB/T** 43229-2023 -->

### 5.2 物理层

道路交通信号控制机（以下简称“交通信号控制机”）与车辆检测器至少支持以太网接口、串行接口中的一种，具体要求如下：

a）以太网接口应至少支持10/100BASE-T全双工通信；

b）串行接口应至少支持RS-232全双工通信、RS-422全双工通信、RS-485半双工通信中的一种。

### 5.3 网络与传输层

网络与传输层具体规定如下。

a）采用以太网接口通信时，网络层宜采用IP协议，传输层宜采用TCP或UDP协议，采用TCP／IP协议通信时，交通信号控制机作为服务端，车辆检测器作为客户端。交通信号控制机TCP、UDP通信默认端口号为40000。

b）采用串行接口通信时，默认通信参数：波特率19 200 Baud、数据位8位、停止位1位、校验位无，无流控制。串行接口采用RS-485半双工通信时，宜在接收到完整信息帧数据后发送消息，保证数据传输的完整性。

### 5.4 应用层

应采用基于信息帧封装的数据表交换方式，信息格式应符合第6章的规定。

## 6 信息格式

### 6.1 约定

#### 6.1.1 字节顺序

长度大于1字节的数值对象，使用小端字节序，应先发送低字节，后发送高字节。单个字节按位表示，最高位（Bit7）在最左侧，最低位（Bit0）在最右侧。

#### 6.1.2 数字表示

数字前未加标识的数字为10进制，数字前以“0x”为标识的数字为16进制。

示例：

<table border="1" ><tr>
<td>数字</td>
<td>表示格式</td>
</tr><tr>
<td>10 进制123 </td>
<td>123 </td>
</tr><tr>
<td>16 进制123 </td>
<td>0x123 </td>
</tr></table>

### 6.2 信息帧结构

信息帧包括帧开始、数据表、校验码与帧结束4个部分，信息帧结构应与图1相符。

<!-- 数据表 ... 0xC0 ... 0xDB ... 校验码 帧开始 帧结束 0xC0 ... 0xDB 0xDC ... 0xDB 0xDD ... ... 0xC0 -->
![](./images/ad034ff752cb1a28.jpg)

**图1 信息帧结构**

<!-- 2 -->

<!-- **GB/T** 43229-2023 -->

### 6.3 信息帧内容

信息帧的帧开始、数据表、校验码与帧结束内容要求如下。

a）帧开始与帧结束长度分别为1字节，取值0×CO。

b）数据表之后，帧结束之前，应有校验码，长度为2字节。校验码使用CRC16，生成多项式为X16+X15+X2+1，初始值为0×FFFF，结果异或值为 0×0000，生成校验码的校验范围为数据表的所有字节。

c）校验结束后应进行数据转义，数据表或校验码中某字节值为0×CO时使用 0×DB、 转义替0×DC 换，为 0×xDB时使用 0×xDB、0×DD 转义替换。

### 6.4 数据表结构

数据表由链路地址、发送方标识、接收方标识、协议版本、操作类型、对象标识及消息内容7部分构成，数据表结构应符合表1的规定。

**表1** 数据表结构

<table border="1" ><tr>
<td>链路地址</td>
<td>发送方标识</td>
<td>接收方标识</td>
<td>协议版本</td>
<td>操作类型</td>
<td>对象标识</td>
<td>消息内容</td>
</tr></table>

### 6.5 数据表内容

数据表内容应符合以下要求。

a）链路地址：由2个字节组成，保留，取值 0×0000。

b）发送方标识：发送方唯一身份，长度7字节。编制规则为：行政区划代码+设备类型+设备编号，行政区划代码、设备类型、设备编号的取值应符合表2的规定。

c）接收方标识：接收方唯一身份，长度7字节。编制规则为：行政区划代码＋设备类型＋设备编号，行政区划代码、设备类型、设备编号的取值应符合表2的规定。

**表2 发送／接收方标识取值**

<table border="1" ><tr>
<td>序号</td>
<td>名称</td>
<td>字节数</td>
<td>取值</td>
<td>说明</td>
</tr><tr>
<td>1 </td>
<td>行政区划代码</td>
<td>3 </td>
<td>0~999 999 </td>
<td>包含省、市、县级，6 位数字，取值应符合GB /T  2260 的规定</td>
</tr><tr>
<td>2 </td>
<td>设备类型</td>
<td>2 </td>
<td>1~65 535 </td>
<td>用于标识当前信息发送／接收设备类型，按位取值。其中：<br>Bito ：交通信号控制机；<br>Bitl：线圈检测；<br>Bit2 ：地磁检测；<br>Bit3 ：超声波检测；<br>Bit4 ：视频检测；<br>Bit5 ：微波断面检测；<br>Bit6 ：多目标雷达检测；<br>Bit7:RFID检测；<br>Bit8~Bit15：保留</td>
</tr><tr>
<td>3 </td>
<td>设备编号</td>
<td>2 </td>
<td>1~65 535 </td>
<td>设备的唯一编号，其中，广播方式接收方标识取值 65535<br>(0×FFFF)</td>
</tr></table>

d）协议版本：标识通信协议的具体版本号，长度1字节，取值 0×10。

e）操作类型：标识数据表的操作类型，用1个字节表示，取值应符合表3的规定。

<!-- 3 -->

<!-- GB/T 43229-2023 -->

**表3 操作类型**

<table border="1" ><tr>
<td>位</td>
<td>二进制值</td>
<td>含义</td>
<td>说明</td>
</tr><tr>
<td>7 </td>
<td>1 </td>
<td>固定字段</td>
<td>固定值为1 </td>
</tr><tr>
<td rowspan="8">6~0</td>
<td>0000000 </td>
<td>查询请求</td>
<td>发送方发送查询消息</td>
</tr><tr>
<td>0000001 </td>
<td>设置请求</td>
<td>发送方发送设置消息</td>
</tr><tr>
<td>0000010 </td>
<td>主动上传</td>
<td>发送方主动上传数据</td>
</tr><tr>
<td>0000011 </td>
<td>查询应答</td>
<td>接收方对查询请求的应答</td>
</tr><tr>
<td>0000100 </td>
<td>设置应答</td>
<td>接收方对设置请求的应答</td>
</tr><tr>
<td>0000101 </td>
<td>主动上传应答</td>
<td>接收方对主动上传的应答</td>
</tr><tr>
<td>0000110 </td>
<td>出错应答</td>
<td>接收到的数据包存在错误</td>
</tr><tr>
<td>其他</td>
<td>保留</td>
<td>-</td>
</tr></table>

f）对象标识：标识数据表的操作对象，用2个字节表示，取值应符合表4的规定。

**表4 对象标识**


![](./images/ea2816d7b0cfdf34.jpg)

<table border="1" ><tr>
<td>对象分类</td>
<td>对象名称</td>
<td>取值</td>
<td>说明</td>
</tr><tr>
<td>通信链路监测</td>
<td>通信连接</td>
<td>0x0101 </td>
<td>描述交通信号控制机与车辆检测器间通信链路的建立与维护</td>
</tr><tr>
<td rowspan="5">设备管理</td>
<td>设备时间</td>
<td>0x0201 </td>
<td>描述车辆检测器设备时间的查询、主动上报与设置</td>
</tr><tr>
<td>串口通信参数</td>
<td>0x0202 </td>
<td>描述车辆检测器串口通信参数，如：波特率、数据位等</td>
</tr><tr>
<td>以太网通信参数</td>
<td>0x0203 </td>
<td>描述车辆检测器以太网通信参数，如：IP 地址、子网掩码、网关地址等</td>
</tr><tr>
<td>车辆检测器配置参数</td>
<td>0x0204 </td>
<td>描述车辆检测器当前配置参数，如：实时上报周期、统计周期等</td>
</tr><tr>
<td>车辆检测器工作状态</td>
<td>0x0205 </td>
<td>描述车辆检测器当前工作状态</td>
</tr><tr>
<td rowspan="12">检测数据</td>
<td>交通流实时信息</td>
<td>0x0301 </td>
<td>描述车辆检测器采集的交通流实时信息，如：交通流量、车辆速度、车头时距等</td>
</tr><tr>
<td>交通流统计数据</td>
<td>0x0302 </td>
<td>描述车辆检测器统计的交通流数据</td>
</tr><tr>
<td>交通流历史数据</td>
<td>0x0303 </td>
<td>描述车辆检测器保存的历史交通流统计数据</td>
</tr><tr>
<td>通行状态实时信息</td>
<td>0x0401 </td>
<td>描述车辆检测器采集的通行状态实时信息</td>
</tr><tr>
<td>通行状态统计数据</td>
<td>0x0402 </td>
<td>描述车辆检测器统计的通行状态数据</td>
</tr><tr>
<td>通行状态历史数据</td>
<td>0x0403 </td>
<td>描述车辆检测器保存的历史通行状态统计数据</td>
</tr><tr>
<td>车辆身份信息</td>
<td>0x0501 </td>
<td>描述车辆检测器采集的车辆身份信息</td>
</tr><tr>
<td>异常事件信息</td>
<td>0x0601 </td>
<td>描述车辆检测器采集的交通异常事件信息</td>
</tr><tr>
<td>异常事件历史数据</td>
<td>0x0602 </td>
<td>描述车辆检测器中保存的历史异常事件信息</td>
</tr><tr>
<td>非机动车检测实时信息</td>
<td>0x0701 </td>
<td>描述车辆检测器采集的实时非机动车检测信息</td>
</tr><tr>
<td>非机动车检测统计数据</td>
<td>0x0702 </td>
<td>描述车辆检测器统计的非机动车检测数据</td>
</tr><tr>
<td>非机动车检测历史数据</td>
<td>0x0703 </td>
<td>描述车辆检测器保存的历史非机动车检测统计数据</td>
</tr><tr>
<td>其他</td>
<td>自定义</td>
<td>-</td>
<td>自定义对象标识</td>
</tr></table>

<!-- **GB/T** 43229-2023 -->

g）消息内容：标识数据表的数据内容应符合第8章的规定。

## 7 通信规程

### 7.1 信息查询

信息查询规程规定了交通信号控制机与车辆检测器间信息查询的具体要求，信息查询规程应符合附录A中A.1的规定。

### 7.2 信息设置

交通信号控制机与车辆检测器均可作为信息设置发送方，信息设置具体规程应符合A.2的规定。

### 7.3 信息主动上报

信息主动上报规程规定了车辆检测器主动上报消息的具体规程，具体如下。

a）无应答。当上报信息为车辆检测器实时数据、异常事件信息时，交通信号控制机无须对车辆检测器上报数据进行应答，具体规程应符合A.3的规定。

b）有应答。当上报信息为车辆检测器统计数据、车辆身份信息时，交通信号控制机须对车辆检测器上报数据进行应答，具体规程应符合A.4的规定。

## 8 消息内容

8.1 交通信号控制机与车辆检测器间的消息内容包括通信链路、设备时间、串口通信参数、以太网通信参数、检测器配置参数、检测器工作状态、交通流信息、通行状态信息、车辆身份信息、异常事件信息、非机动车检测信息。

8.2 交通信号控制机与车辆检测器间各类消息的消息类型、操作类型、通信规程应符合表5的规定，信息格式应符合附录B的规定。

8.3 交通信号控制机与行人检测器间的消息内容见附录C。

**表5** 消息表

<table border="1" ><tr>
<td>序号</td>
<td>消息类型</td>
<td>操作类型</td>
<td>通信规程</td>
<td>说明</td>
</tr><tr>
<td>1 </td>
<td rowspan="4">通信链路</td>
<td>连接请求</td>
<td rowspan="2">信息设置</td>
<td>脱机状态下，车辆检测器每5s 主动发送，信息格式应符合表B . 1 的规定</td>
</tr><tr>
<td>2 </td>
<td>连接请求应答</td>
<td>交通信号控制机收到连接请求后认为联机成功并应答，车辆检测器收到应答后认为联机成功，信息格式应符合表B . 2 的规定，后续操作均在联机状态下执行</td>
</tr><tr>
<td>3 </td>
<td>心跳查询</td>
<td rowspan="2">信息查询</td>
<td>交通信号控制机每5s 发送，信息格式应符合表B . 3 的规定。交通信号控制机连续3 次未收到车辆检测器心跳查询应答，认为车辆检测器脱机</td>
</tr><tr>
<td>4 </td>
<td>心跳查询应答</td>
<td>车辆检测器收到心跳查询后应答，信息格式应符合表B . 4 的规定。车辆检测器超过15s 未收到交通信号机心跳查询，认为与交通信号机断开</td>
</tr><tr>
<td>5 </td>
<td rowspan="2">设备时间</td>
<td>时间查询</td>
<td rowspan="2">信息查询</td>
<td>交通信号控制机发送，信息格式应符合表B . 5 的规定</td>
</tr><tr>
<td>6 </td>
<td>时间查询应答</td>
<td>车辆检测器收到时间查询消息后应答，信息格式应符合表B . 6 的规定</td>
</tr><tr>
<td>7 </td>
<td rowspan="3">设备时间</td>
<td>时间主动上传</td>
<td>主动上报（无应答）</td>
<td>车辆检测器联机成功后，主动上传设备时间，信息格式应符合表B . 8<br>的规定</td>
</tr><tr>
<td>8 </td>
<td>时间设置</td>
<td>信息设置</td>
<td>交通信号控制机发送，信息格式应符合表B . 9 的规定</td>
</tr><tr>
<td>9 </td>
<td>时间设置应答</td>
<td>信息设置</td>
<td>车辆检测器收到时间设置消息后调整设备时间并应答，信息格式应符合表B . 10 的规定</td>
</tr><tr>
<td>10 </td>
<td rowspan="4">串口通信参数</td>
<td>参数查询</td>
<td rowspan="2">信息查询</td>
<td>交通信号控制机或车辆检测器均可发送，信息格式应符合表B . 11 的规定</td>
</tr><tr>
<td>11 </td>
<td>参数查询应答</td>
<td>接收方收到串口通信参数查询消息后应答，信息格式应符合表B . 12<br>的规定</td>
</tr><tr>
<td>12 </td>
<td>参数设置</td>
<td rowspan="2">信息设置</td>
<td>交通信号控制机或车辆检测器均可发送，信息格式应符合表B . 14 的规定</td>
</tr><tr>
<td>13 </td>
<td>参数设置应答</td>
<td>接收方收到串口通信参数设置消息后应答，信息格式应符合表B . 15<br>的规定，设置成功后，双方使用新的通信参数进行通信</td>
</tr><tr>
<td>14 </td>
<td rowspan="4">以太网<br>通信参数</td>
<td>参数查询</td>
<td rowspan="2">信息查询</td>
<td>交通信号控制机或车辆检测器均可发送，信息格式应符合表B . 17 的规定</td>
</tr><tr>
<td>15 </td>
<td>参数查询应答</td>
<td>接收方收到以太网通信参数查询消息后应答，信息格式应符合表B . 18 的规定</td>
</tr><tr>
<td>16 </td>
<td>参数设置</td>
<td rowspan="2">信息设置</td>
<td>交通信号控制机或车辆检测器均可发送，信息格式应符合表B . 20 的规定</td>
</tr><tr>
<td>17 </td>
<td>参数设置应答</td>
<td>接收方收到以太网通信参数设置表后应答，信息格式应符合表B . 21<br>的规定，设置成功后，双方使用新的通信参数进行通信</td>
</tr><tr>
<td>18 </td>
<td rowspan="4">车辆检测器配置参数</td>
<td>参数查询</td>
<td rowspan="2">信息查询</td>
<td>交通信号控制机发送，信息格式应符合表B . 22 的规定</td>
</tr><tr>
<td>19 </td>
<td>参数查询应答</td>
<td>车辆检测器收到检测器配置参数查询消息后应答，信息格式应符合表B . 23 的规定</td>
</tr><tr>
<td>20 </td>
<td>参数设置</td>
<td rowspan="2">信息设置</td>
<td>交通信号控制机发送，信息格式应符合表B . 26 的规定</td>
</tr><tr>
<td>21 </td>
<td>参数设置应答</td>
<td>当车辆检测器收到检测器配置参数设置消息后应答，信息格式应符合表B . 28 的规定</td>
</tr><tr>
<td>22 </td>
<td rowspan="4">车辆检测器工作状态</td>
<td>工作状态主动上传</td>
<td rowspan="2">主动上报（有应答）</td>
<td>车辆检测器工作状态发生变化时应主动上传检测器工作状态消息，信息格式应符合表B . 29 的规定</td>
</tr><tr>
<td>23 </td>
<td>工作状态主动上传应答</td>
<td>交通信号控制机收到车辆检测器主动上传的检测器工作状态消息后应答，信息格式应符合表B . 32 的规定</td>
</tr><tr>
<td>24 </td>
<td>工作状态查询</td>
<td rowspan="2">信息查询</td>
<td>交通信号控制机发送，信息格式应符合表B . 33 的规定</td>
</tr><tr>
<td>25 </td>
<td>工作状态查询应答</td>
<td>车辆检测器收到交通信号控制机的检测器工作状态查询后应答，信息格式应符合表B . 34 的规定</td>
</tr><tr>
<td>26 </td>
<td rowspan="3">交通流<br>信息</td>
<td>实时信息主动上传</td>
<td>主动上报（无应答）</td>
<td>车辆检测器应按照实时信息上传周期主动上传交通流实时信息，信息格式应符合表B . 35 的规定</td>
</tr><tr>
<td>27 </td>
<td>统计数据主动上传</td>
<td rowspan="2">主动上报（有应答）</td>
<td>一个统计周期结束后车辆检测器应主动上传该周期的交通流统计数据，信息格式应符合表B . 38 的规定</td>
</tr><tr>
<td>28 </td>
<td>统计数据主动上传应答</td>
<td>交通信号控制机收到车辆检测器主动上传的交通流统计数据后应答，信息格式应符合表B . 41 的规定</td>
</tr><tr>
<td>29 </td>
<td rowspan="2">交通流<br>信息</td>
<td>历史数据查询</td>
<td rowspan="2">信息查询</td>
<td>交通信号控制机发送，信息格式应符合表B . 42 的规定</td>
</tr><tr>
<td>30 </td>
<td>历史数据查询应答</td>
<td>车辆检测器收到交通流历史数据查询消息后应答，信息格式应符合表B . 44 的规定</td>
</tr><tr>
<td>31 </td>
<td rowspan="5">通行状态信息</td>
<td>实时信息主动上传</td>
<td>主动上报（无应答）</td>
<td>车辆检测器应按照实时信息上传周期主动上传通行状态实时信息，信息格式应符合表B . 46 的规定</td>
</tr><tr>
<td>32 </td>
<td>统计数据主动上传</td>
<td rowspan="2">主动上报（有应答）</td>
<td>一个统计周期结束后车辆检测器应主动上传该周期的通行状态统计数据，信息格式应符合表B . 49 的规定</td>
</tr><tr>
<td>33 </td>
<td>统计数据主动上传应答</td>
<td>交通信号控制机收到车辆检测器主动上传的通行状态统计数据后应答，信息格式应符合表B . 52 的规定</td>
</tr><tr>
<td>34 </td>
<td>历史数据查询</td>
<td rowspan="2">信息查询</td>
<td>交通信号控制机发送，信息格式应符合表B . 53 的规定</td>
</tr><tr>
<td>35 </td>
<td>历史数据查询应答</td>
<td>车辆检测器收到通行状态历史数据查询消息后应答，信息格式应符合表B . 54 的规定</td>
</tr><tr>
<td>36 </td>
<td rowspan="2">车辆身份信息</td>
<td>身份信息主动上传</td>
<td rowspan="2">主动上报（有应答）</td>
<td>车辆检测器在检测到车辆身份信息后，主动上传车辆身份信息，信息格式应符合表B . 56 的规定</td>
</tr><tr>
<td>37 </td>
<td>身份信息主动上传应答</td>
<td>交通信号控制机收到车辆检测器主动上传的车辆身份数据后应答，信息格式应符合表B . 59 的规定</td>
</tr><tr>
<td>38 </td>
<td rowspan="3">异常事件信息</td>
<td>信息主动上传</td>
<td>主动上报（无应答）</td>
<td>车辆检测器在检测到异常事件后应主动上传异常事件信息，信息格式应符合表B . 60 的规定</td>
</tr><tr>
<td>39 </td>
<td>历史数据查询</td>
<td rowspan="2">信息查询</td>
<td>交通信号控制机发送，信息格式应符合表B . 64 的规定</td>
</tr><tr>
<td>40 </td>
<td>历史数据查询应答</td>
<td>车辆检测器收到异常事件历史数据查询消息后应答，信息格式应符合表B . 65 的规定</td>
</tr><tr>
<td>41 </td>
<td rowspan="5">非机动车检测信息</td>
<td>实时信息主动上传</td>
<td>主动上报（无应答）</td>
<td>车辆检测器应按照实时信息上传周期主动上传非机动车检测信息，信息格式应符合表B . 67 的规定</td>
</tr><tr>
<td>42 </td>
<td>统计数据主动上传</td>
<td rowspan="2">主动上报（有应答）</td>
<td>一个统计周期结束后车辆检测器应主动上传该周期的非机动车检测统计数据，信息格式应符合表B . 70 的规定</td>
</tr><tr>
<td>43 </td>
<td>统计数据主动上传应答</td>
<td>交通信号控制机收到车辆检测器主动上传的非机动车检测统计数据后应答，信息格式应符合表B . 73 的规定</td>
</tr><tr>
<td>44 </td>
<td>历史数据查询</td>
<td rowspan="2">信息查询</td>
<td>交通信号控制机发送，信息格式应符合表B . 74 的规定</td>
</tr><tr>
<td>45 </td>
<td>历史数据查询应答</td>
<td>车辆检测器收到历史数据查询消息后应答，信息格式应符合表B . 75<br>的规定</td>
</tr><tr>
<td>46 </td>
<td>错误应答信息</td>
<td>错误应答</td>
<td>信息查询、信息设置、主动上报（有应答）</td>
<td>在双方通信过程中，任意一方接收到的信息存在错误，则发送错误应答信息，信息格式应符合表B . 77 的规定</td>
</tr></table>

<!-- 5 -->

<!-- GB/T 43229-2023 -->

**表5** 消息表（续）

<!-- 6 -->

<!-- GB/T 43229-2023 -->

**表5** 消息表（续）

<!-- 7 -->

<!-- **GB/T** 43229-2023 -->

## 附录A

## （规范性）

## 通信规程

### A.1 信息查询

交通信号控制机与车辆检测器间信息查询规程具体要求如下。

a）信息查询：发送方发送查询信息。

b）查询应答：接收方接收到查询信息后，对查询信息进行校验，若信息正确，发送查询应答信息；若信息错误，发送错误应答信息。

c）查询超时：发送方若在规定的时间（3s~5s）内，没有接收到查询应答信息，则信息查询失败，本次规程结束。

### A.2 信息设置

交通信号控制机与车辆检测器间信息设置规程具体要求如下。

a）信息设置：发送方发送设置信息。

b）设置应答：接收方接收到设置信息后，对设置信息进行校验，若信息正确，完成指定操作，并发送设置应答信息；若信息错误，发送错误应答信息。

c）设置超时：发送方若在规定的时间 3s∼5s）内，没有接收到设置应答信息，则信息设置失败，本次规程结束。

### A.3 信息主动上报（无应答）

车辆检测器信息主动上报（无应答）规程具体要求如下：

a）信息主动上报：车辆检测器向交通信号控制机主动上报信息；

b）信息接收：交通信号控制机接收车辆检测器主动上报信息，无需应答。

### A.4 信息主动上报（有应答）

车辆检测器信息主动上报（有应答）规程具体要求如下。

a）信息主动上报：车辆检测器向交通信号控制机主动上报信息。

b）上报应答：交通信号控制机接收到主动上报信息后，对主动上报信息进行校验，若信息正确，向车辆检测器发送主动上报应答信息；若信息错误，向车辆检测器发送错误应答信息。

c）上报应答超时：车辆检测器若在规定的时间（3s∼5∼s)内没有接收到交通信号控制机的上报应答信息，则信息主动上报失败，本次规程结束。

<!-- 8 -->

<!-- **GB/T 43229-2023** -->

### 附录B

### （规范性）

### 信息格式

#### B.1 通信链路

##### B.1.1 连接请求

车辆检测器连接请求信息格式应符合表B.1的规定。

**表B.1 连接请求**

<table border="1" ><tr>
<td>名称</td>
<td>链路地址</td>
<td>发送方标识</td>
<td>接收方标识</td>
<td>协议版本</td>
<td>操作类型</td>
<td>对象标识</td>
<td>消息内容</td>
</tr><tr>
<td>内容</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>0x81 </td>
<td>0x0101 </td>
<td>无</td>
</tr></table>

##### B.1.2 连接请求应答

交通信号控制机连接请求应答信息格式应符合表B.2的规定。

**表B.2 连接请求应答**

<table border="1" ><tr>
<td>名称</td>
<td>链路地址</td>
<td>发送方标识</td>
<td>接收方标识</td>
<td>协议版本</td>
<td>操作类型</td>
<td>对象标识</td>
<td>消息内容</td>
</tr><tr>
<td>内容</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>0x84 </td>
<td>0x0101 </td>
<td>无</td>
</tr></table>

##### B.1.3 心跳查询

交通信号控制机心跳查询信息格式应符合表B.3的规定。

**表B.3 心跳查询**

<table border="1" ><tr>
<td>名称</td>
<td>链路地址</td>
<td>发送方标识</td>
<td>接收方标识</td>
<td>协议版本</td>
<td>操作类型</td>
<td>对象标识</td>
<td>消息内容</td>
</tr><tr>
<td>内容</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>0x80 </td>
<td>0x0101 </td>
<td>无</td>
</tr></table>

##### B.1.4 心跳查询应答

车辆检测器心跳查询应答信息格式应符合表B.4的规定。

表B.4 心跳查询应答

<table border="1" ><tr>
<td>名称</td>
<td>链路地址</td>
<td>发送方标识</td>
<td>接收方标识</td>
<td>协议版本</td>
<td>操作类型</td>
<td>对象标识</td>
<td>消息内容</td>
</tr><tr>
<td>内容</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>0x83 </td>
<td>0x0101 </td>
<td>无</td>
</tr></table>

#### B.2 设备时间

##### B.2.1 时间查询

时间查询信息格式应符合表B.5的规定。

<!-- 9 -->

<!-- GB/T 43229-2023 -->

**表B.5时间查询**

<table border="1" ><tr>
<td>名称</td>
<td>链路地址</td>
<td>发送方标识</td>
<td>接收方标识</td>
<td>协议版本</td>
<td>操作类型</td>
<td>对象标识</td>
<td>消息内容</td>
</tr><tr>
<td>内容</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>0x80 </td>
<td>0x0201 </td>
<td>无</td>
</tr></table>

##### B.2.2 时间查询应答

时间查询应答信息格式应符合表B.6的规定。

**表B.6 时间查询应答**

<table border="1" ><tr>
<td>名称</td>
<td>链路地址</td>
<td>发送方标识</td>
<td>接收方标识</td>
<td>协议版本</td>
<td>操作类型</td>
<td>对象标识</td>
<td>消息内容</td>
</tr><tr>
<td>内容</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>0x83 </td>
<td>0x0201 </td>
<td>应符合表B . 7 的规定</td>
</tr></table>

表B.7 设备时间

<table border="1" ><tr>
<td>序号</td>
<td>名称</td>
<td>字节数</td>
<td>取值</td>
<td>说明</td>
</tr><tr>
<td>1 </td>
<td>设备时间</td>
<td>6 </td>
<td>-</td>
<td>前4 个字节为设备地方时秒值，后2 个字节为地方时毫秒值</td>
</tr><tr>
<td>2 </td>
<td>标准时差</td>
<td>4 </td>
<td>-</td>
<td>设备地方时与标准UTC 时间的时差秒值</td>
</tr></table>

##### B.2.3 时间主动上传

车辆检测器时间主动上传信息格式应符合表B.8的规定。

**表B.8 时间主动上传**

<table border="1" ><tr>
<td>名称</td>
<td>链路地址</td>
<td>发送方标识</td>
<td>接收方标识</td>
<td>协议版本</td>
<td>操作类型</td>
<td>对象标识</td>
<td>消息内容</td>
</tr><tr>
<td>内容</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>0x82 </td>
<td>0x0201 </td>
<td>应符合表B . 7 的规定</td>
</tr></table>

##### B.2.4 时间设置

时间设置信息格式应符合表B.9的规定。


![](./images/689b6c65e497bc65.jpg)

**表B.9 时间设置**

<table border="1" ><tr>
<td>名称</td>
<td>链路地址</td>
<td>发送方标识</td>
<td>接收方标识</td>
<td>协议版本</td>
<td>操作类型</td>
<td>对象标识</td>
<td>消息内容</td>
</tr><tr>
<td>内容</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>0x81 </td>
<td>0x0201 </td>
<td>应符合表B . 7 的规定</td>
</tr></table>

**B.2.5 时间设置应答**

时间设置应答信息格式应符合表B.10的规定。

**表B.10** **时间设置应答**

<table border="1" ><tr>
<td>名称</td>
<td>链路地址</td>
<td>发送方标识</td>
<td>接收方标识</td>
<td>协议版本</td>
<td>操作类型</td>
<td>对象标识</td>
<td>消息内容</td>
</tr><tr>
<td>内容</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>0x84 </td>
<td>0x0201 </td>
<td>应符合表B . 7 的规定</td>
</tr></table>

<!-- 10 -->

<!-- **GB/T** 43229-2023 -->

#### B.3 串口通信参数

##### B.3.1 串口通信参数查询

串口通信参数查询表应符合表B.11的规定。

**表B.11** **串口通信参数查询**

<table border="1" ><tr>
<td>名称</td>
<td>链路地址</td>
<td>发送方标识</td>
<td>接收方标识</td>
<td>协议版本</td>
<td>操作类型</td>
<td>对象标识</td>
<td>消息内容</td>
</tr><tr>
<td>内容</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>0x80 </td>
<td>0x0202 </td>
<td>无</td>
</tr></table>


![](./images/4220bfac1c534aa6.jpg)

##### B.3.2 串口通信参数查询应答

串口通信参数查询应答表应符合表B.12的规定。

**表B.12 串口通信参数查询应答**

<table border="1" ><tr>
<td>名称</td>
<td>链路地址</td>
<td>发送方标识</td>
<td>接收方标识</td>
<td>协议版本</td>
<td>操作类型</td>
<td>对象标识</td>
<td>消息内容</td>
</tr><tr>
<td>内容</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>0x83 </td>
<td>0x0202 </td>
<td>应符合表B . 13 的规定</td>
</tr></table>

**表B.13** **串口通信参数**

<table border="1" ><tr>
<td>序号</td>
<td>名称</td>
<td>字节数</td>
<td>取值</td>
<td>说明</td>
</tr><tr>
<td>1 </td>
<td>串口类型</td>
<td>1 </td>
<td>1~3</td>
<td>串口类型，取值如下：<br>1:RS-232C;<br>2:RS-485;<br>3:RS-422</td>
</tr><tr>
<td>2 </td>
<td>波特率</td>
<td>1 </td>
<td>1~10</td>
<td>串口通信波特率，单位为波特（Baud )，取值如下：<br>1:1 200;<br>2:2 400;<br>3:4 800;<br>4:9 600;<br>5:19 200;<br>6:38 400;<br>7:43 000;<br>8:56 000;<br>9:57 600;<br>10:115 200 </td>
</tr><tr>
<td>3 </td>
<td>数据位</td>
<td>1 </td>
<td>1~4</td>
<td>串口通信数据位，取值如下：<br>1:5;<br>2:6;<br>3:7;<br>4:8</td>
</tr><tr>
<td>4 </td>
<td>停止位</td>
<td>1 </td>
<td>1∼3</td>
<td>串口通信停止位，取值如下：<br>1:1位；<br>2:1.5位；<br>3:2位</td>
</tr><tr>
<td>5 </td>
<td>校验位</td>
<td>1 </td>
<td>1∼3</td>
<td>串口通信校验位，取值如下：<br>1 ：无校验；<br>2 ：偶校验；<br>3 ：奇校验</td>
</tr></table>

<!-- 11 -->

<!-- GB/T 43229-2023 -->

**表B.13 串口通信参数（续）**

##### B.3.3 串口通信参数设置


![](./images/f37895034f986e63.jpg)

串口通信参数设置信息格式应符合表B.14的规定。

**表B.14 串口通信参数设置**

<table border="1" ><tr>
<td>名称</td>
<td>链路地址</td>
<td>发送方标识</td>
<td>接收方标识</td>
<td>协议版本</td>
<td>操作类型</td>
<td>对象标识</td>
<td>消息内容</td>
</tr><tr>
<td>内容</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>0x81 </td>
<td>0×0202</td>
<td>应符合表B . 13 的规定，表中串口类型忽略</td>
</tr></table>

##### B.3.4 串口通信参数设置应答

串口通信参数设置应答信息格式应符合表B.15的规定。

**表B.15 串口通信参数设置应答**

<table border="1" ><tr>
<td>名称</td>
<td>链路地址</td>
<td>发送方标识</td>
<td>接收方标识</td>
<td>协议版本</td>
<td>操作类型</td>
<td>对象标识</td>
<td>消息内容</td>
</tr><tr>
<td>内容</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>0x84 </td>
<td>0×0202</td>
<td>应符合表B . 16 的规定</td>
</tr></table>

**表B.16 参数设置成功标志**

<table border="1" ><tr>
<td>序号</td>
<td>名称</td>
<td>字节数</td>
<td>取值</td>
<td>说明</td>
</tr><tr>
<td>1 </td>
<td>参数设置成功标志</td>
<td>1 </td>
<td>0~1</td>
<td>取值如下：<br>0 ：参数设置失败；<br>1 ：参数设置成功</td>
</tr></table>

#### B.4 以太网通信参数

##### B.4.1 以太网通信参数查询

以太网通信参数查询信息格式应符合表B.17的规定。

<!-- 12 -->

<!-- GB/T 43229-2023 -->

**表B.17 以太网通信参数查询**

<table border="1" ><tr>
<td>名称</td>
<td>链路地址</td>
<td>发送方标识</td>
<td>接收方标识</td>
<td>协议版本</td>
<td>操作类型</td>
<td>对象标识</td>
<td>消息内容</td>
</tr><tr>
<td>内容</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>0x80 </td>
<td>0x0203 </td>
<td>无</td>
</tr></table>

##### B.4.2 以太网通信参数查询应答

以太网通信参数查询应答信息格式应符合表B.18的规定。

**表B.18** **以太网通信参数查询应答**

<table border="1" ><tr>
<td>名称</td>
<td>链路地址</td>
<td>发送方标识</td>
<td>接收方标识</td>
<td>协议版本</td>
<td>操作类型</td>
<td>对象标识</td>
<td>消息内容</td>
</tr><tr>
<td>内容</td>
<td>-</td>
<td>-</td>
<td></td>
<td>-</td>
<td>0x83 </td>
<td>0x0203 </td>
<td>应符合表B . 19 的规定</td>
</tr></table>

**表B.19** **以太网通信参数**

<table border="1" ><tr>
<td>序号</td>
<td>名称</td>
<td>字节数</td>
<td>取值</td>
<td>说明</td>
</tr><tr>
<td>1 </td>
<td>IP 地址类型</td>
<td>1 </td>
<td>1~2</td>
<td>取值如下：<br>1:IPv4;<br>2:IPv6</td>
</tr><tr>
<td>2 </td>
<td>车辆检测器IP 地址</td>
<td>16 </td>
<td>-</td>
<td>若为IPv4 格式，取前4 个字节数据；<br>若为IPv6 格式，取16 个字节数据</td>
</tr><tr>
<td>3 </td>
<td>车辆检测器子网掩码<br>或子网前缀长度</td>
<td>4 </td>
<td>-</td>
<td>若为IPv4 格式，表示子网掩码，取4 个字节数据；<br>若为IPv6 格式，表示子网前缀长度，取第1 个字节数据</td>
</tr><tr>
<td>4 </td>
<td>车辆检测器默认网关</td>
<td>16 </td>
<td>-</td>
<td>若为IPv4 格式，取前4 个字节数据；<br>若为IPv6 格式，取16 个字节数据</td>
</tr><tr>
<td>5 </td>
<td>交通信号控制机IP 地址</td>
<td>16 </td>
<td>-</td>
<td>若为IPv4 格式，取前4 个字节数据；<br>若为IPv6 格式，取16 个字节数据</td>
</tr><tr>
<td>6 </td>
<td>交通信号控制机侦听端口</td>
<td>2 </td>
<td>1~65 535 </td>
<td>-</td>
</tr><tr>
<td>7 </td>
<td>其他上位机IP 地址</td>
<td>16 </td>
<td>-</td>
<td>若为IPv4 格式，取前4 个字节数据；<br>若为IPv6 格式，取16 个字节数据</td>
</tr><tr>
<td>8 </td>
<td>其他上位机侦听端口</td>
<td>2 </td>
<td>1~65 535 </td>
<td>-</td>
</tr></table>

##### B.4.3 以太网通信参数设置

以太网通信参数设置信息格式应符合表B.20的规定。

**表B.20** **以太网通信参数设置**

<table border="1" ><tr>
<td>名称</td>
<td>链路地址</td>
<td>发送方标识</td>
<td>接收方标识</td>
<td>协议版本</td>
<td>操作类型</td>
<td>对象标识</td>
<td>消息内容</td>
</tr><tr>
<td>内容</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>0x81 </td>
<td>0x0203 </td>
<td>应符合表B . 19 的规定</td>
</tr></table>

<!-- 13 -->

<!-- **GB/T 43229-2023** -->

##### B.4.4 以太网通信参数设置应答

以太网通信参数设置应答信息格式应符合表B.21的规定。

表B.21 **以太网通信参数设置应答**

<table border="1" ><tr>
<td>名称</td>
<td>链路地址</td>
<td>发送方标识</td>
<td>接收方标识</td>
<td>协议版本</td>
<td>操作类型</td>
<td>对象标识</td>
<td>消息内容</td>
</tr><tr>
<td>内容</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>0x84 </td>
<td>0x0203 </td>
<td>应符合表B . 16 的规定</td>
</tr></table>

#### B.5 车辆检测器配置参数

##### B.5.1 车辆检测器配置参数查询

车辆检测器配置参数查询信息格式应符合表B.22的规定。

**表B.22 车辆检测器配置参数查询**

<table border="1" ><tr>
<td>名称</td>
<td>链路地址</td>
<td>发送方标识</td>
<td>接收方标识</td>
<td>协议版本</td>
<td>操作类型</td>
<td>对象标识</td>
<td>消息内容</td>
</tr><tr>
<td>内容</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>0x80 </td>
<td>0x0204 </td>
<td>无</td>
</tr></table>

##### B.5.2 车辆检测器配置参数查询应答

车辆检测器配置参数查询应答信息格式应符合表B.23的规定。

**表B.23 车辆检测器配置参数查询应答**

<table border="1" ><tr>
<td>名称</td>
<td>链路地址</td>
<td>发送方标识</td>
<td>接收方标识</td>
<td>协议版本</td>
<td>操作类型</td>
<td>对象标识</td>
<td>消息内容</td>
</tr><tr>
<td>内容</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>0x83 </td>
<td>0x0204 </td>
<td>应符合表B . 24 的规定</td>
</tr></table>

**表B.24 车辆检测器查询参数**

<table border="1" ><tr>
<td>序号</td>
<td>名称</td>
<td>字节数</td>
<td>取值</td>
<td>说明</td>
</tr><tr>
<td>1 </td>
<td>设备制造商名称长度</td>
<td>1 </td>
<td>1~100</td>
<td>车辆检测器制造商名称的字节数，记为M </td>
</tr><tr>
<td>2 </td>
<td>设备制造商名称</td>
<td>M </td>
<td>-</td>
<td>汉字应采用GB /T  2312 编码，其他采用ASCII 码</td>
</tr><tr>
<td>3 </td>
<td>设备型号长度</td>
<td>1 </td>
<td>1~100</td>
<td>车辆检测器型号的字节数，记为N </td>
</tr><tr>
<td>4 </td>
<td>设备型号</td>
<td>N </td>
<td>-</td>
<td>车辆检测器的型号</td>
</tr><tr>
<td>5 </td>
<td>最大检测通道数</td>
<td>1 </td>
<td>1~128</td>
<td>车辆检测器可设置的最大检测点位或检测区域数</td>
</tr><tr>
<td>6 </td>
<td>检测器类型</td>
<td>2 </td>
<td>1~65 535 </td>
<td>检测器的检测方式，按位取值，应符合表2 中设备类型的规定</td>
</tr><tr>
<td>7 </td>
<td>信号输出延时</td>
<td>1 </td>
<td>0~255</td>
<td>车辆进入检测通道到检测设备输出脉冲电平信号之间的平均间隔时间。以0 . 01s 计，单位为秒（s ）</td>
</tr><tr>
<td>8 </td>
<td>交通检测项目</td>
<td>24 </td>
<td>-</td>
<td>应符合表B . 25 的规定</td>
</tr><tr>
<td>9 </td>
<td>实时信息上传周期</td>
<td>1 </td>
<td>1~20</td>
<td>以0 . 1s 计，单位为秒（s ）</td>
</tr><tr>
<td>10 </td>
<td>统计数据上传周期</td>
<td>2 </td>
<td>2~3 600 </td>
<td>单位为秒（s ）</td>
</tr><tr>
<td>11 </td>
<td>其他</td>
<td>16 </td>
<td>-</td>
<td>保留字节</td>
</tr></table>

<!-- 14 -->

<!-- GB/T 43229-2023 -->

**表B.25** **交通检测项目**

<table border="1" ><tr>
<td>项目分类</td>
<td>项目类型</td>
<td>字节</td>
<td>位</td>
<td>说明</td>
</tr><tr>
<td rowspan="11">交通流<br>信息</td>
<td>交通流量</td>
<td rowspan="11">1~3</td>
<td>0~2</td>
<td>数据位定义：<br>Bit0:A类车；<br>Bitl:B类车；<br>Bit2:C类车。<br>数据位取值：<br>0 ：不统计；<br>1 ：统计。<br>交通流量分A 、B 、C 三类车进行检测，其中：<br>A 类车：车长≥12m;<br>B 类车：6m≤车长&lt;1220<br>C 类车:车长&lt;6m </td>
</tr><tr>
<td>时间占有率</td>
<td>3 </td>
<td rowspan="9">按位取值，取值如下：<br>0 ：不具备该项目检测功能；<br>1 ：具备该项目检测功能</td>
</tr><tr>
<td>车辆速度</td>
<td>4 </td>
</tr><tr>
<td>车辆长度</td>
<td>5 </td>
</tr><tr>
<td>车头时距</td>
<td>6 </td>
</tr><tr>
<td>车间时距</td>
<td>7 </td>
</tr><tr>
<td>停车次数</td>
<td>8 </td>
</tr><tr>
<td>停车时长</td>
<td>9 </td>
</tr><tr>
<td>车辆占有采集次数</td>
<td>10 </td>
</tr><tr>
<td>车辆占有信息</td>
<td>11 </td>
</tr><tr>
<td>其他</td>
<td>12~23</td>
<td>保留位</td>
</tr><tr>
<td rowspan="10">通行状态<br>信息</td>
<td>通道车辆数</td>
<td rowspan="10">4~6</td>
<td>24 </td>
<td rowspan="9">按位取值，取值如下：<br>0 ：不具备该项目检测功能；<br>1 ：具备该项目检测功能</td>
</tr><tr>
<td>空间占有率</td>
<td>25 </td>
</tr><tr>
<td>排队长度</td>
<td>26 </td>
</tr><tr>
<td>头车位置</td>
<td>27 </td>
</tr><tr>
<td>末车位置</td>
<td>28 </td>
</tr><tr>
<td>平均车速</td>
<td>29 </td>
</tr><tr>
<td>头车速度</td>
<td>30 </td>
</tr><tr>
<td>末车速度</td>
<td>31 </td>
</tr><tr>
<td>车间间距</td>
<td>32 </td>
</tr><tr>
<td>其他</td>
<td>33~47</td>
<td>保留位</td>
</tr><tr>
<td rowspan="5">车辆身份信息</td>
<td>电子身份</td>
<td rowspan="5">7~8</td>
<td>48 </td>
<td rowspan="4">按位取值，取值如下：<br>0:不具备该项目检测功能；<br>1 ：具备该项目检测功能</td>
</tr><tr>
<td>号牌号码</td>
<td>49 </td>
</tr><tr>
<td>号牌种类</td>
<td>50 </td>
</tr><tr>
<td>车辆类型</td>
<td>51 </td>
</tr><tr>
<td>其他</td>
<td>52~63</td>
<td>保留位</td>
</tr></table>

<!-- 15 -->

<!-- GB/T 43229-2023 -->

**表B.25 交通检测项目（续）**

<table border="1" ><tr>
<td>项目分类</td>
<td>项目类型</td>
<td>字节</td>
<td>位</td>
<td>说明</td>
</tr><tr>
<td rowspan="3">异常事件信息</td>
<td>异常事件发生时间</td>
<td rowspan="3">9~10</td>
<td>64 </td>
<td rowspan="2">按位取值，取值如下：<br>0 ：不具备该项目检测功能；<br>1 ：具备该项目检测功能</td>
</tr><tr>
<td>异常事件类型</td>
<td>65 </td>
</tr><tr>
<td>其他</td>
<td>66~79</td>
<td>保留位</td>
</tr><tr>
<td rowspan="3">非机动车检测信息</td>
<td>非机动车数量</td>
<td rowspan="3">11~12</td>
<td>80 </td>
<td rowspan="2">按位取值，取值如下：<br>0 ：不具备该项目检测功能；<br>1 ：具备该项目检测功能</td>
</tr><tr>
<td>非机动车占有率</td>
<td>81 </td>
</tr><tr>
<td>其他</td>
<td>82~95</td>
<td>保留位</td>
</tr><tr>
<td>其他检测项目</td>
<td>其他</td>
<td>13~24</td>
<td>96~191</td>
<td>保留位</td>
</tr></table>

##### B.5.3 车辆检测器配置参数设置

车辆检测器配置参数设置信息格式应符合表B.26的规定。

**表B.26 车辆检测器配置参数设置**

<table border="1" ><tr>
<td>名称</td>
<td>链路地址</td>
<td>发送方标识</td>
<td>接收方标识</td>
<td>协议版本</td>
<td>操作类型</td>
<td>对象标识</td>
<td>消息内容</td>
</tr><tr>
<td>内容</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>0x81 </td>
<td>0x0204 </td>
<td>应符合表B . 27 的规定</td>
</tr></table>

表B.27 车辆检测器配置参数

<table border="1" ><tr>
<td>序号</td>
<td>名称</td>
<td>字节数</td>
<td>取值</td>
<td>说明</td>
</tr><tr>
<td>1 </td>
<td>实时信息上传周期</td>
<td>1 </td>
<td>0~20</td>
<td>实时信息的计算周期，以0 . 1s 计，单位为秒（s ）</td>
</tr><tr>
<td>2 </td>
<td>统计数据上传周期</td>
<td>2 </td>
<td>2~3 600 </td>
<td>统计数据的计算周期，单位为秒（s ）</td>
</tr><tr>
<td>3 </td>
<td>其他</td>
<td>16 </td>
<td>-</td>
<td>保留字节</td>
</tr></table>

##### B.5.4 车辆检测器配置参数设置应答

车辆检测器配置参数设置应答信息格式应符合表B.28的规定。

**表B.28 车辆检测器配置参数设置应答**

<table border="1" ><tr>
<td>名称</td>
<td>链路地址</td>
<td>发送方标识</td>
<td>接收方标识</td>
<td>协议版本</td>
<td>操作类型</td>
<td>对象标识</td>
<td>消息内容</td>
</tr><tr>
<td>内容</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>0x84 </td>
<td>0x0204 </td>
<td>应符合表B . 16 的规定</td>
</tr></table>

#### B.6 车辆检测器工作状态

##### B.6.1 车辆检测器工作状态主动上传

车辆检测器工作状态主动上传信息格式应符合表B.29的规定。

<!-- 16 -->

<!-- **GB/T** 43229-2023 -->

**表B.29 车辆检测器工作状态主动上传**

<table border="1" ><tr>
<td>名称</td>
<td>链路地址</td>
<td>发送方标识</td>
<td>接收方标识</td>
<td>协议版本</td>
<td>操作类型</td>
<td>对象标识</td>
<td>消息内容</td>
</tr><tr>
<td>内容</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>0×82</td>
<td>0×0205</td>
<td>应符合表B . 30 的规定</td>
</tr></table>

**表B.30车辆检测器工作状态信息**

<table border="1" ><tr>
<td>序号</td>
<td>名称</td>
<td>字节数</td>
<td>取值</td>
<td>说明</td>
</tr><tr>
<td>1 </td>
<td>检测器工作状态生成本地时间</td>
<td>6 </td>
<td>-</td>
<td>前4 个字节为设备地方时秒值，后2 个字节为地方时毫秒值</td>
</tr><tr>
<td>2 </td>
<td>检测器通道数</td>
<td>1 </td>
<td>1~128</td>
<td>当前有效的检测通道数，记为N </td>
</tr><tr>
<td>3 </td>
<td>单路检测通道<br>工作状态信息</td>
<td>4 </td>
<td>-</td>
<td>应符合表B . 31 的规定</td>
</tr><tr>
<td colspan="5">······</td>
</tr><tr>
<td>2+N</td>
<td>单路检测通道<br>工作状态信息</td>
<td>4 </td>
<td>-</td>
<td>应符合表B . 31 的规定</td>
</tr></table>

**表B.31** **单路检测通道工作状态信息**

<table border="1" ><tr>
<td>序号</td>
<td>名称</td>
<td>字节数</td>
<td>取值</td>
<td>说明</td>
</tr><tr>
<td>1 </td>
<td>检测通道编号</td>
<td>1 </td>
<td>1~128</td>
<td>标识交通信号控制机与车辆检测器通信的检测通道号</td>
</tr><tr>
<td>2 </td>
<td>运行状态<br><img src="https://web-api.textin.com/ocr_image/external/ec775fb5d6650850.jpg"></td>
<td>1 </td>
<td>0~255</td>
<td>检测通道运行状态，取值如下：<br>0 ：正常运行；<br>1 ：异常；<br>2~255：保留</td>
</tr><tr>
<td>3 </td>
<td>其他</td>
<td>2 </td>
<td>-</td>
<td>保留字节</td>
</tr></table>

##### B.6.2 车辆检测器工作状态主动上传应答

车辆检测器工作状态主动上传应答信息格式应符合表B.32的规定。

**表B.32** **车辆检测器工作状态主动上传应答**

<table border="1" ><tr>
<td>名称</td>
<td>链路地址</td>
<td>发送方标识</td>
<td>接收方标识</td>
<td>协议版本</td>
<td>操作类型</td>
<td>对象标识</td>
<td>消息内容</td>
</tr><tr>
<td>内容</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>0×85</td>
<td>0×0205</td>
<td>无</td>
</tr></table>

##### B.6.3 车辆检测器工作状态查询

车辆检测器工作状态查询信息格式应符合表B.33的规定。

**表B.33** **车辆检测器工作状态查询**

<table border="1" ><tr>
<td>名称</td>
<td>链路地址</td>
<td>发送方标识</td>
<td>接收方标识</td>
<td>协议版本</td>
<td>操作类型</td>
<td>对象标识</td>
<td>消息内容</td>
</tr><tr>
<td>内容</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>0x80 </td>
<td>0×0205</td>
<td>无</td>
</tr></table>

<!-- 17 -->

<!-- **GB/T 43229-2023** -->

##### B.6.4 车辆检测器工作状态查询应答

车辆检测器工作状态查询应答信息格式应符合表B.34的规定。

**表B.34 车辆检测器工作状态查询应答**

<table border="1" ><tr>
<td>名称</td>
<td>链路地址</td>
<td>发送方标识</td>
<td>接收方标识</td>
<td>协议版本</td>
<td>操作类型</td>
<td>对象标识</td>
<td>消息内容</td>
</tr><tr>
<td>内容</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>0×83</td>
<td>0×0205</td>
<td>应符合表B . 30 的规定</td>
</tr></table>

#### B.7 交通流信息

##### B.7.1 交通流实时信息主动上传

交通流实时信息主动上传信息格式应符合表B.35的规定。

**表B.35 交通流实时信息主动上传**

<table border="1" ><tr>
<td>名称</td>
<td>链路地址</td>
<td>发送方标识</td>
<td>接收方标识</td>
<td>协议版本</td>
<td>操作类型</td>
<td>对象标识</td>
<td>消息内容</td>
</tr><tr>
<td>内容</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>0x82 </td>
<td>0x0301 </td>
<td>应符合表B . 36 的规定</td>
</tr></table>

**表B.36** **交通流实时信息**

<table border="1" ><tr>
<td>序号</td>
<td>名称</td>
<td>字节数</td>
<td>取值</td>
<td>说明</td>
</tr><tr>
<td>1 </td>
<td>交通流实时信息生成本地时间</td>
<td>6 </td>
<td>-</td>
<td>前4 个字节为当前地方时秒值，后2 个字节为地方时毫秒值</td>
</tr><tr>
<td>2 </td>
<td>检测通道数</td>
<td>1 </td>
<td>1~128</td>
<td>当前有效的检测通道数，记为N<br><img src="https://web-api.textin.com/ocr_image/external/3468ce8fa99424ae.jpg"></td>
</tr><tr>
<td>3 </td>
<td>单路检测通道<br>交通流实时信息</td>
<td>-</td>
<td>-</td>
<td>应符合表B . 37 的规定</td>
</tr><tr>
<td colspan="5">······</td>
</tr><tr>
<td>2+N</td>
<td>单路检测通道<br>交通流实时信息</td>
<td>-</td>
<td>-</td>
<td>应符合表B . 37 的规定</td>
</tr></table>

**表B.37 单路检测通道交通流实时信息**

<table border="1" ><tr>
<td>序号</td>
<td>名称</td>
<td>字节数</td>
<td>取值</td>
<td>说明</td>
</tr><tr>
<td>1 </td>
<td>检测通道编号</td>
<td>1 </td>
<td>1~128</td>
<td>标识交通信号控制机与车辆检测器通信的检测通道号</td>
</tr><tr>
<td>2 </td>
<td>A 类车流量</td>
<td>1 </td>
<td>0~255</td>
<td>取值255 表示溢出</td>
</tr><tr>
<td>3 </td>
<td>B 类车流量</td>
<td>1 </td>
<td>0~255</td>
<td>取值255 表示溢出</td>
</tr><tr>
<td>4 </td>
<td>C 类车流量</td>
<td>1 </td>
<td>0~255</td>
<td>取值255 表示溢出</td>
</tr><tr>
<td>5 </td>
<td>时间占有率</td>
<td>2 </td>
<td>0~1000</td>
<td>以0.1％计</td>
</tr><tr>
<td>6 </td>
<td>车辆速度</td>
<td>1 </td>
<td>0~255</td>
<td>255 表示溢出，单位为千米每小时（km /h ）</td>
</tr><tr>
<td>7 </td>
<td>车辆长度</td>
<td>2 </td>
<td>0~65 535 </td>
<td>以0 . 1m 计．65535 表示溢出，单位为米（m ）</td>
</tr><tr>
<td>8 </td>
<td>车头时距</td>
<td>1 </td>
<td>0~255</td>
<td>以0 . 1s 计，255 表示溢出，单位为秒（s ）</td>
</tr><tr>
<td>9 </td>
<td>车间时距</td>
<td>1 </td>
<td>0~255</td>
<td>以0 . 1s 计，255 表示溢出，单位为秒（s ）</td>
</tr><tr>
<td>10 </td>
<td>停车次数</td>
<td>1 </td>
<td>0~255</td>
<td>以0 . 1 计，255 表示溢出</td>
</tr><tr>
<td>11 </td>
<td>停车时长</td>
<td>1 </td>
<td>0~255</td>
<td>以0 . 1s 计，255 表示溢出，单位为秒（s ）</td>
</tr><tr>
<td>12 </td>
<td>车辆占有采集次数</td>
<td>1 </td>
<td>0~255</td>
<td>实时上传周期时间内车辆占有采集的次数，记为N </td>
</tr><tr>
<td>13 </td>
<td>车辆占有信息</td>
<td>(N+7)/8 取整</td>
<td>-</td>
<td>按位取值，其中：<br>0 ：无车辆；<br>1 ：有车辆。<br>由低位到高位按时间顺序排列，高位空余比特位补0 </td>
</tr><tr>
<td>14 </td>
<td>其他</td>
<td>4 </td>
<td>-</td>
<td>保留字节</td>
</tr></table>

<!-- 18 -->

<!-- **GB/T** 43229-2023 -->

**表B.37 单路检测通道交通流实时信息（续）**

##### B.7.2 交通流统计数据主动上传

交通流统计数据主动上传信息格式应符合表B.38的规定。

**表B.38交通流统计数据主动上传**

<table border="1" ><tr>
<td>名称</td>
<td>链路地址</td>
<td>发送方标识</td>
<td>接收方标识</td>
<td>协议版本</td>
<td>操作类型</td>
<td>对象标识</td>
<td>消息内容</td>
</tr><tr>
<td>内容</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>0×82</td>
<td>0x0302 </td>
<td>应符合表B . 39 的规定</td>
</tr></table>

**表B.39** 交通流统计数据

<table border="1" ><tr>
<td>序号</td>
<td>名称</td>
<td>字节数</td>
<td>取值</td>
<td>说明</td>
</tr><tr>
<td>1 </td>
<td>统计起始时间</td>
<td>6 </td>
<td>-</td>
<td>以统计周期的整数倍作为统计开始时间，前4 个字节为统计起始时间秒值，后2 个字节保留</td>
</tr><tr>
<td>2 </td>
<td>统计结束时间</td>
<td>6 </td>
<td>-</td>
<td>以统计周期的整数倍作为统计结束时间，前4 个字节为统计结束时间秒值，后2 个字节保留</td>
</tr><tr>
<td>3 </td>
<td>检测通道数</td>
<td>1 </td>
<td>0~128</td>
<td>当前有效的检测通道数，记为N </td>
</tr><tr>
<td>4 </td>
<td>单路检测通道<br>交通流统计数据</td>
<td>20 </td>
<td>-</td>
<td>应符合表B . 40 的规定</td>
</tr><tr>
<td colspan="5">······</td>
</tr><tr>
<td>3+N</td>
<td>单路检测通道<br>交通流统计数据</td>
<td>20 </td>
<td></td>
<td>应符合表B . 40 的规定</td>
</tr></table>

**表B.40 单路检测通道交通流统计信息**

<table border="1" ><tr>
<td>序号</td>
<td>名称</td>
<td>字节数</td>
<td>取值</td>
<td>说明</td>
</tr><tr>
<td>1 </td>
<td>检测通道编号</td>
<td>1 </td>
<td>1~128</td>
<td>标识交通信号控制机与车辆检测器通信的检测通道号</td>
</tr><tr>
<td>2 </td>
<td>A 类车总流量</td>
<td>2 </td>
<td>0~65 535 </td>
<td>取值65535 表示溢出</td>
</tr><tr>
<td>3 </td>
<td>B 类车总流量</td>
<td>2 </td>
<td>0~65 535 </td>
<td>取值65535 表示溢出</td>
</tr><tr>
<td>4 </td>
<td>C 类车总流量</td>
<td>2 </td>
<td>0~65 535 </td>
<td>取值65535 表示溢出</td>
</tr><tr>
<td>5 </td>
<td>平均时间占有率</td>
<td>2 </td>
<td>0~1000</td>
<td>算术平均值，以0 . 1 ％计</td>
</tr><tr>
<td>6 </td>
<td>平均车辆速度</td>
<td>1 </td>
<td>0~255</td>
<td>算术平均值，255 表示溢出，单位为千米每小时（km /h ）</td>
</tr><tr>
<td>7 </td>
<td>平均车辆长度</td>
<td>2 </td>
<td>0~65 535 </td>
<td>算术平均值，以0 . 1m 计，65535 表示溢出。单位为米（m ）</td>
</tr><tr>
<td>8 </td>
<td>平均车头时距</td>
<td>1 </td>
<td>0~255</td>
<td>算术平均值，以0 . 1s 计，255 表示溢出，单位为秒（s ）</td>
</tr><tr>
<td>9 </td>
<td>平均车间时距</td>
<td>1 </td>
<td>0~255</td>
<td>算术平均值，以0 . 1s 计，255 表示溢出，单位为秒（s ）</td>
</tr><tr>
<td>10 </td>
<td>平均停车次数</td>
<td>1 </td>
<td>0~255</td>
<td>算术平均值，以0 . 1 计，255 表示溢出</td>
</tr><tr>
<td>11 </td>
<td>平均停车时长</td>
<td>1 </td>
<td>0~255</td>
<td>算术平均值，以0 . 1s 计，255 表示溢出，单位为秒（s ）</td>
</tr><tr>
<td>12 </td>
<td>其他</td>
<td>4 </td>
<td>-</td>
<td>保留字节</td>
</tr></table>

<!-- 19 -->

<!-- GB/T 43229-2023 -->

**表B.40 单路检测通道交通流统计信息（续）**

##### B.7.3 交通流统计数据主动上传应答

交通流统计数据主动上传应答信息格式应符合表B.41的规定。

**表B.41 交通流统计数据主动上传应答**

<table border="1" ><tr>
<td>名称</td>
<td>链路地址</td>
<td>发送方标识</td>
<td>接收方标识</td>
<td>协议版本</td>
<td>操作类型</td>
<td>对象标识</td>
<td>消息内容</td>
</tr><tr>
<td>内容</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>0x85 </td>
<td>0x0302 </td>
<td>无</td>
</tr></table>

##### B.7.4 交通流历史数据查询

交通流历史数据查询信息格式应符合表B.42的规定。

**表B.42 交通流历史数据查询**

<table border="1" ><tr>
<td>名称</td>
<td>链路地址</td>
<td>发送方标识</td>
<td>接收方标识</td>
<td>协议版本</td>
<td>操作类型</td>
<td>对象标识</td>
<td>消息内容</td>
</tr><tr>
<td>内容</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>0x80 </td>
<td>0x0303 </td>
<td>应符合表B . 43 的规定</td>
</tr></table>

**表B.43 历史数据查询时间**

<table border="1" ><tr>
<td>序号</td>
<td>名称</td>
<td>字节数</td>
<td>取值</td>
<td>说明</td>
</tr><tr>
<td>1 </td>
<td>起始时间</td>
<td>6 </td>
<td>-</td>
<td>前4 个字节为历史数据起始时间秒值，后2 个字节保留</td>
</tr><tr>
<td>2 </td>
<td>结束时间</td>
<td>6 </td>
<td>-</td>
<td>前4 个字节为历史数据结束时间秒值，后2 个字节保留</td>
</tr><tr>
<td colspan="5">注：如果结束时间与起始时间相同，则表示查询从起始时间开始所对应的所有历史数据。</td>
</tr></table>

##### B.7.5 交通流历史数据查询应答

交通流历史数据查询应答信息格式应符合表B.44的规定。

<!-- 20 -->

<!-- GB/T 43229-2023 -->

**表B.44 交通流历史数据查询应答**

<table border="1" ><tr>
<td>名称</td>
<td>链路地址</td>
<td>发送方标识</td>
<td>接收方标识</td>
<td>协议版本</td>
<td>操作类型</td>
<td>对象标识</td>
<td>消息内容</td>
</tr><tr>
<td>内容</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>0×83</td>
<td>0×0303</td>
<td>应符合表B . 45 的规定</td>
</tr></table>

**表B.45** **交通流历史统计数据**

<table border="1" ><tr>
<td>序号</td>
<td>名称</td>
<td>字节数</td>
<td>取值</td>
<td>说明</td>
</tr><tr>
<td>1 </td>
<td>历史数据流水号</td>
<td>2 </td>
<td>1~65 535 </td>
<td>每发送一帧数据包取值加1 , 65535 加1 后流水号复位为1 ，每次重新联机后应复位为1 </td>
</tr><tr>
<td>2 </td>
<td>统计数据</td>
<td>-</td>
<td>-</td>
<td>应符合表B . 39 的规定</td>
</tr></table>

#### B.8 通行状态信息

##### B.8.1 通行状态实时信息主动上传

通行状态实时信息主动上传信息格式应符合表B.46的规定。

**表B.46 通行状态实时信息主动上传**

<table border="1" ><tr>
<td>名称</td>
<td>链路地址</td>
<td>发送方标识</td>
<td>接收方标识</td>
<td>协议版本</td>
<td>操作类型</td>
<td>对象标识</td>
<td>消息内容</td>
</tr><tr>
<td>内容</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>0×82</td>
<td>0x0401 </td>
<td>应符合表B . 47 的规定</td>
</tr></table>

**表B.47 通行状态实时信息**

<table border="1" ><tr>
<td>序号</td>
<td>名称</td>
<td>字节数</td>
<td>取值</td>
<td>说明</td>
</tr><tr>
<td>1 </td>
<td>通行状态实时信息生成本地时间</td>
<td>6 </td>
<td>-</td>
<td>前4 个字节为当前地方时秒值，后2 个字节为地方时毫秒值</td>
</tr><tr>
<td>2 </td>
<td>检测通道数</td>
<td>1 </td>
<td>1~128</td>
<td>当前有效的检测通道数，记为N </td>
</tr><tr>
<td>3 </td>
<td>单路检测通道<br>通行状态实时信息</td>
<td>18 </td>
<td>-</td>
<td>应符合表B . 48 的规定</td>
</tr><tr>
<td colspan="5">······</td>
</tr><tr>
<td>2+N</td>
<td>单路检测通道<br>通行状态实时信息</td>
<td>18 </td>
<td>-</td>
<td>应符合表B . 48 的规定</td>
</tr></table>

**表B.48 单路检测通道通行状态实时信息**

<table border="1" ><tr>
<td>序号</td>
<td>名称</td>
<td>字节数</td>
<td>取值</td>
<td>说明</td>
</tr><tr>
<td>1 </td>
<td>检测通道编号</td>
<td>1 </td>
<td>1~128</td>
<td>标识交通信号控制机与车辆检测器通信的检测通道号</td>
</tr><tr>
<td>2 </td>
<td>通道车辆数</td>
<td>2 </td>
<td>0~65 535 </td>
<td>检测区域内实时车辆数量，单位为辆</td>
</tr><tr>
<td>3 </td>
<td>空间占有率</td>
<td>2 </td>
<td>0~1000</td>
<td>车辆在检测区域的空间占有率，以0 . 1 ％计</td>
</tr><tr>
<td>4 </td>
<td>排队长度</td>
<td>2 </td>
<td>0~65 535 </td>
<td>队首到队尾的距离，单位为米（m ）</td>
</tr><tr>
<td>5 </td>
<td>头车位置</td>
<td>1 </td>
<td>0~255</td>
<td>检测区域内第一辆车距停止线距离，单位为米（m ）</td>
</tr><tr>
<td>6 </td>
<td>末车位置</td>
<td>2 </td>
<td>0~65 535 </td>
<td>检测区域内最后一辆车距停止线距离，单位为米（m ）</td>
</tr><tr>
<td>7 </td>
<td>平均车速</td>
<td>1 </td>
<td>0~255</td>
<td>算术平均值，单位为千米每小时（km /h ）</td>
</tr><tr>
<td>8 </td>
<td>头车速度</td>
<td>1 </td>
<td>0~255</td>
<td>单位为千米每小时（km /h ）</td>
</tr><tr>
<td>9 </td>
<td>末车速度</td>
<td>1 </td>
<td>0~255</td>
<td>单位为千米每小时（km /h ）</td>
</tr><tr>
<td>10 </td>
<td>车间间距</td>
<td>1 </td>
<td>0~255</td>
<td>检测区域内车辆的平均车间间距，以0 . 1m 计，255 表示溢出，单位为米（m ）</td>
</tr><tr>
<td>11 </td>
<td>其他</td>
<td>4 </td>
<td>-</td>
<td>保留字节</td>
</tr></table>

<!-- 21 -->

<!-- GB/T 43229-2023 -->

**表B.48 单路检测通道通行状态实时信息（续）**

##### B.8.2 通行状态统计数据主动上传


![](./images/d4e213ea41257646.jpg)

通行状态统计数据主动上传信息格式应符合表B.49的规定。

**表B.49 通行状态统计数据主动上传**

<table border="1" ><tr>
<td>名称</td>
<td>链路地址</td>
<td>发送方标识</td>
<td>接收方标识</td>
<td>协议版本</td>
<td>操作类型</td>
<td>对象标识</td>
<td>消息内容</td>
</tr><tr>
<td>内容</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>0×82</td>
<td>0×0402</td>
<td>应符合表B . 50 的规定</td>
</tr></table>

**表B.50** 通行状态统计数据

<table border="1" ><tr>
<td>序号</td>
<td>名称</td>
<td>字节数</td>
<td>取值</td>
<td>说明</td>
</tr><tr>
<td>1 </td>
<td>统计起始时间</td>
<td>6 </td>
<td>-</td>
<td>以统计周期的整数倍作为统计开始时间，前4 个字节为统计起始时间秒值，后2 个字节保留</td>
</tr><tr>
<td>2 </td>
<td>统计结束时间</td>
<td>6 </td>
<td>-</td>
<td>以统计周期的整数倍作为统计结束时间，前4 个字节为统计结束时间秒值，后2 个字节保留</td>
</tr><tr>
<td>3 </td>
<td>检测通道数</td>
<td>1 </td>
<td>1~128</td>
<td>当前有效的检测通道数，记为N </td>
</tr><tr>
<td>4 </td>
<td>单路检测通道<br>通行状态统计数据</td>
<td>14 </td>
<td>-</td>
<td>应符合表B . 51 的规定</td>
</tr><tr>
<td colspan="5">·····.</td>
</tr><tr>
<td>3+N</td>
<td>单路检测通道<br>通行状态统计数据</td>
<td>14 </td>
<td>-</td>
<td>应符合表B . 51 的规定</td>
</tr></table>

**表B.51 单路检测通道通行状态统计信息**

<table border="1" ><tr>
<td>序号</td>
<td>名称</td>
<td>字节数</td>
<td>取值</td>
<td>说明</td>
</tr><tr>
<td>1 </td>
<td>检测通道编号</td>
<td>1 </td>
<td>1~128</td>
<td>标识交通信号控制机与车辆检测器通信的检测通道号</td>
</tr><tr>
<td>2 </td>
<td>通道总车辆数</td>
<td>2 </td>
<td>0~65 535 </td>
<td>检测通道内总的车辆数，单位为辆</td>
</tr><tr>
<td>3 </td>
<td>平均空间占有率</td>
<td>1 </td>
<td>0~200</td>
<td>算术平均值，以0 . 5 ％计</td>
</tr><tr>
<td>4 </td>
<td>平均排队长度</td>
<td>2 </td>
<td>0~65 535 </td>
<td>队首到队尾的平均距离，单位为米（m ）</td>
</tr><tr>
<td>5 </td>
<td>平均车速</td>
<td>1 </td>
<td>0~255</td>
<td>算术平均值，单位为千米每小时（km /h ）</td>
</tr><tr>
<td>6 </td>
<td>平均车间间距</td>
<td>1 </td>
<td>0~255</td>
<td>算术平均值，以0 . 1m 计，单位为米（m ）</td>
</tr><tr>
<td>7 </td>
<td>最大排队长度</td>
<td>2 </td>
<td>0~65 535 </td>
<td>统计时段内车辆最大排队长度，单位为米（m ）</td>
</tr><tr>
<td>8 </td>
<td>其他</td>
<td>4 </td>
<td>-</td>
<td>保留字节</td>
</tr></table>

<!-- 22 -->

<!-- **GB/T** 43229-2023 -->

**表B.51 单路检测通道通行状态统计信息（续）**

##### B.8.3 通行状态统计数据主动上传应答

通行状态统计数据主动上传应答信息格式应符合表B.52的规定。

**表B.52 通行状态统计数据主动上传应答**

<table border="1" ><tr>
<td>名称</td>
<td>链路地址</td>
<td>发送方标识</td>
<td>接收方标识</td>
<td>协议版本</td>
<td>操作类型</td>
<td>对象标识</td>
<td>消息内容</td>
</tr><tr>
<td>内容</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>0x85 </td>
<td>0x0402 </td>
<td>无</td>
</tr></table>

##### B.8.4 通行状态历史数据查询

通行状态历史数据查询信息格式应符合表B.53的规定。

**表B.53 通行状态历史数据查询**

<table border="1" ><tr>
<td>名称</td>
<td>链路地址</td>
<td>发送方标识</td>
<td>接收方标识</td>
<td>协议版本</td>
<td>操作类型</td>
<td>对象标识</td>
<td>消息内容</td>
</tr><tr>
<td>内容</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>0x80 </td>
<td>0x0403 </td>
<td>应符合表B . 43 的规定</td>
</tr></table>

##### B.8.5 通行状态历史数据查询应答

通行状态历史数据查询应答信息格式应符合表B.54的规定。

**表B.54 通行状态历史数据查询应答**

<table border="1" ><tr>
<td>名称</td>
<td>链路地址</td>
<td>发送方标识</td>
<td>接收方标识</td>
<td>协议版本</td>
<td>操作类型</td>
<td>对象标识</td>
<td>消息内容</td>
</tr><tr>
<td>内容</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>0x83 </td>
<td>0x0403 </td>
<td>应符合表B . 55 的规定</td>
</tr></table>

表B.55 **通行状态历史统计数据**

<table border="1" ><tr>
<td>序号</td>
<td>名称</td>
<td>字节数</td>
<td>取值</td>
<td>说明</td>
</tr><tr>
<td>1 </td>
<td>历史数据流水号</td>
<td>2 </td>
<td>1~65 535 </td>
<td>每发送一帧数据包取值加1 , 65  535 加1 后流水号复位为1 ，每次重新联机后应复位为1 </td>
</tr><tr>
<td>2 </td>
<td>统计数据</td>
<td>-</td>
<td>-</td>
<td>应符合表B . 50 的规定</td>
</tr></table>

<!-- 23 -->

<!-- **GB/T 43229-2023** -->

#### B.9 车辆身份信息

##### B.9.1 车辆身份信息主动上传

车辆身份信息主动上传信息格式应符合表B.56的规定。

**表B.56 车辆身份信息主动上传**

<table border="1" ><tr>
<td>名称</td>
<td>链路地址</td>
<td>发送方标识</td>
<td>接收方标识</td>
<td>协议版本</td>
<td>操作类型</td>
<td>对象标识</td>
<td>消息内容</td>
</tr><tr>
<td>内容</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>0×82</td>
<td>0x0501 </td>
<td>应符合表B . 57 的规定</td>
</tr></table>

**表B.57** **车辆身份信息**

<table border="1" ><tr>
<td>序号</td>
<td>名称</td>
<td>字节数</td>
<td>取值</td>
<td>说明</td>
</tr><tr>
<td>1 </td>
<td>车辆身份信息<br>生成本地时间</td>
<td>6 </td>
<td>-</td>
<td>前4 个字节为当前地方时秒值，后2 个字节为地方时毫秒值</td>
</tr><tr>
<td>2 </td>
<td>车辆数量</td>
<td>1 </td>
<td>1~255</td>
<td>实时测得车辆数量，记为M </td>
</tr><tr>
<td>3 </td>
<td>车辆身份信息内容1 </td>
<td>93 </td>
<td>-</td>
<td>应符合表B . 58 的规定</td>
</tr><tr>
<td colspan="5">······</td>
</tr><tr>
<td>2+M</td>
<td>车辆身份信息内容M </td>
<td>93 </td>
<td>-</td>
<td>应符合表B . 58 的规定</td>
</tr></table>

**表B.58 单路检测通道车辆身份信息**

<table border="1" ><tr>
<td>序号</td>
<td>名称</td>
<td>字节数</td>
<td>取值</td>
<td>说明</td>
</tr><tr>
<td>1 </td>
<td>检测通道编号</td>
<td>1 </td>
<td>1~128</td>
<td>标识交通信号控制机与车辆检测器通信的检测通道号</td>
</tr><tr>
<td>2 </td>
<td>电子身份</td>
<td>64 </td>
<td>-</td>
<td>机动车电子标识序列号，格式应符合GB /T  35789 . 1 -2017  中附录A 的规定</td>
</tr><tr>
<td>3 </td>
<td>号牌号码</td>
<td>15 </td>
<td>-</td>
<td>号牌号码编码应符合GA /T  543 . 5 公安数据元 DE00307 </td>
</tr><tr>
<td>4 </td>
<td>号牌种类</td>
<td>2 </td>
<td>-</td>
<td>号牌种类定义应符合GA /T  16 . 7 ，号牌种类编码应符合GA /T  543 . 5<br>公安数据元 DE00306 </td>
</tr><tr>
<td>5 </td>
<td>车辆类型</td>
<td>3 </td>
<td>-</td>
<td>车辆类型定义应符合GA /T  16 . 4 ，车辆类型编码应符合GA /T  543 . 5<br>公安数据元 DE00303 </td>
</tr><tr>
<td>6 </td>
<td>其他</td>
<td>4 </td>
<td>-</td>
<td>保留字节</td>
</tr></table>

##### B.9.2 车辆身份信息主动上传应答

车辆身份信息主动上传应答信息格式应符合表B.59的规定。

**表B.59 车辆身份信息主动上传应答**

<table border="1" ><tr>
<td>名称</td>
<td>链路地址</td>
<td>发送方标识</td>
<td>接收方标识</td>
<td>协议版本</td>
<td>操作类型</td>
<td>对象标识</td>
<td>消息内容</td>
</tr><tr>
<td>内容</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>0×85</td>
<td>0×0501</td>
<td>无</td>
</tr></table>

<!-- 24 -->

<!-- **GB/T** 43229-2023 -->

#### B.10 异常事件信息

##### B.10.1 异常事件信息主动上传

异常事件信息主动上传信息格式应符合表B.60的规定。

**表B.60 异常事件信息主动上传**

<table border="1" ><tr>
<td>名称</td>
<td>链路地址</td>
<td>发送方标识</td>
<td>接收方标识</td>
<td>协议版本</td>
<td>操作类型</td>
<td>对象标识</td>
<td>消息内容</td>
</tr><tr>
<td>内容</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>0x82 </td>
<td>0x0601 </td>
<td>应符合表B . 61 的规定</td>
</tr></table>

**表B.61** **交通检测异常事件信息**

<table border="1" ><tr>
<td>序号</td>
<td>名称</td>
<td>字节数</td>
<td>取值</td>
<td>说明</td>
</tr><tr>
<td>1 </td>
<td>异常事件信息<br>生成本地时间</td>
<td>6 </td>
<td>-</td>
<td>前4 个字节为当前地方时秒值，后2 个字节为地方时毫秒值</td>
</tr><tr>
<td>2 </td>
<td>检测通道数</td>
<td>1 </td>
<td>0~128</td>
<td>当前有效的检测通道数，记为N </td>
</tr><tr>
<td>3 </td>
<td>单路检测通道<br>异常事件信息</td>
<td>16 </td>
<td>-</td>
<td>应符合表B . 62 的规定</td>
</tr><tr>
<td colspan="5">······</td>
</tr><tr>
<td>2+N</td>
<td>单路检测通道<br>异常事件信息</td>
<td>16 </td>
<td>-</td>
<td>应符合表B . 62 的规定</td>
</tr></table>

**表B.62 单路检测通道异常事件信息**

<table border="1" ><tr>
<td>序号</td>
<td>名称</td>
<td>字节数</td>
<td>取值</td>
<td>说明</td>
</tr><tr>
<td>1 </td>
<td>检测通道编号</td>
<td>1 </td>
<td>1~128</td>
<td>标识交通信号控制机与车辆检测器通信的检测通道号</td>
</tr><tr>
<td>2 </td>
<td>异常事件发生时间</td>
<td>6 </td>
<td>-</td>
<td>前4 个字节为异常事件发生的地方时秒值，后2 字节为当前地方时毫秒值</td>
</tr><tr>
<td>3 </td>
<td>异常事件类型</td>
<td>1 </td>
<td>-</td>
<td>应符合表B . 63 的规定</td>
</tr><tr>
<td>4 </td>
<td>其他</td>
<td>8 </td>
<td>-</td>
<td>保留字节</td>
</tr></table>

**表B.63 异常事件类型**

<table border="1" ><tr>
<td>序号</td>
<td>异常事件类型</td>
<td>取值</td>
<td>说明</td>
</tr><tr>
<td>1 </td>
<td>排队超限</td>
<td>1 </td>
<td>车辆排队超过设定位置的交通现象</td>
</tr><tr>
<td>2 </td>
<td>排队溢出</td>
<td>2 </td>
<td>下游交叉口车辆排队蔓延至上游交叉口的交通现象</td>
</tr><tr>
<td>3 </td>
<td>交叉口阻塞</td>
<td>3 </td>
<td>下游交叉口车辆排队蔓延至上游交叉口内部，导致上游交叉口车辆被阻塞无法通过的交通现象</td>
</tr><tr>
<td>4 </td>
<td>其他</td>
<td>4~255</td>
<td>保留字节</td>
</tr></table>

<!-- 25 -->

<!-- **GB/T 43229-2023** -->

##### B.10.2 异常事件历史数据查询

异常事件历史数据查询信息格式应符合表B.64的规定。

**表B.64 异常事件历史数据查询**

<table border="1" ><tr>
<td>名称</td>
<td>链路地址</td>
<td>发送方标识</td>
<td>接收方标识</td>
<td>协议版本</td>
<td>操作类型</td>
<td>对象标识</td>
<td>消息内容</td>
</tr><tr>
<td>内容</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>0×80</td>
<td>0×0602</td>
<td>应符合表B . 43 的规定</td>
</tr></table>

##### B.10.3 异常事件历史数据查询应答

异常事件历史数据查询应答信息格式应符合表B.65的规定。

**表B.65 异常事件历史数据查询应答**

<table border="1" ><tr>
<td>名称</td>
<td>链路地址</td>
<td>发送方标识</td>
<td>接收方标识</td>
<td>协议版本</td>
<td>操作类型</td>
<td>对象标识</td>
<td>消息内容</td>
</tr><tr>
<td>内容</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>0×83</td>
<td>0×0602</td>
<td>应符合表B . 66 的规定</td>
</tr></table>

**表B.66 异常事件历史统计数据**

<table border="1" ><tr>
<td>序号</td>
<td>名称</td>
<td>字节数</td>
<td>取值</td>
<td>说明</td>
</tr><tr>
<td>1 </td>
<td>历史数据流水号</td>
<td>2 </td>
<td>1~65 535 </td>
<td>每发送一帧数据包取值加1 , 65  535 加1 后流水号复位为1 ，每次重新联机后应复位为1 </td>
</tr><tr>
<td>2 </td>
<td>异常事件信息</td>
<td>-</td>
<td>-</td>
<td>应符合表B . 61 的规定</td>
</tr></table>

#### B.11 非机动车检测信息

##### B.11.1 非机动车检测实时信息主动上传

非机动车检测实时信息主动上传信息格式应符合表B.67的规定。

**表B.67 非机动车检测实时信息主动上传**

<table border="1" ><tr>
<td>名称</td>
<td>链路地址</td>
<td>发送方标识</td>
<td>接收方标识</td>
<td>协议版本</td>
<td>操作类型</td>
<td>对象标识</td>
<td>消息内容</td>
</tr><tr>
<td>内容</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>0×82</td>
<td>0×0701</td>
<td>应符合表B . 68 的规定</td>
</tr></table>

**表B.68** **非机动车检测实时信息**

<table border="1" ><tr>
<td>序号</td>
<td>名称</td>
<td>字节数</td>
<td>取值</td>
<td>说明</td>
</tr><tr>
<td>1 </td>
<td>非机动车实时检测数据本地时间</td>
<td>6 </td>
<td>-</td>
<td>前4 个字节为当前地方时秒值，后2 个字节为地方时毫秒值</td>
</tr><tr>
<td>2 </td>
<td>检测通道数</td>
<td>1 </td>
<td>1~128</td>
<td>当前有效的检测通道数，记为N </td>
</tr><tr>
<td>3 </td>
<td>单路非机动车<br>检测通道实时信息</td>
<td>12 </td>
<td>-</td>
<td>应符合表B . 69 的规定</td>
</tr><tr>
<td colspan="5">······</td>
</tr><tr>
<td>2+N</td>
<td>单路非机动车<br>检测通道实时信息</td>
<td>12 </td>
<td><img src="https://web-api.textin.com/ocr_image/external/a7277dfec6450987.jpg"></td>
<td>应符合表B . 69 的规定</td>
</tr></table>

<!-- 26 -->

<!-- **GB/T** 43229-2023 -->

**表B.69 单路检测通道非机动车检测实时信息**

<table border="1" ><tr>
<td>序号</td>
<td>名称</td>
<td>字节数</td>
<td>取值</td>
<td>说明</td>
</tr><tr>
<td>1 </td>
<td>检测通道编号</td>
<td>1 </td>
<td>1~128</td>
<td>标识交通信号控制机与车辆检测器通信的检测通道号</td>
</tr><tr>
<td>2 </td>
<td>非机动车数量</td>
<td>1 </td>
<td>0~255</td>
<td>检测区域内非机动车数量，当数量超过255 时，取值255 </td>
</tr><tr>
<td>3 </td>
<td>非机动车占有率</td>
<td>2 </td>
<td>0~1000</td>
<td>检测区域内非机动车空间占有比率，以0 . 1 ％计</td>
</tr><tr>
<td>4 </td>
<td>其他</td>
<td>8 </td>
<td>-</td>
<td>保留字节</td>
</tr></table>

##### B.11.2 非机动车检测统计数据主动上传

非机动车检测统计数据主动上传信息格式应符合表B.70的规定。

**表B.70 非机动车检测统计数据主动上传**

<table border="1" ><tr>
<td>名称</td>
<td>链路地址</td>
<td>发送方标识</td>
<td>接收方标识</td>
<td>协议版本</td>
<td>操作类型</td>
<td>对象标识</td>
<td>消息内容</td>
</tr><tr>
<td>内容</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>0×82</td>
<td>0x0702 </td>
<td>应符合表B . 71 的规定</td>
</tr></table>

**表B.71非机动车检测统计数据**

<table border="1" ><tr>
<td>序号</td>
<td>名称</td>
<td>字节数</td>
<td>取值</td>
<td>说明</td>
</tr><tr>
<td>1 </td>
<td>统计起始时间</td>
<td>6 </td>
<td>-</td>
<td>以统计周期的整数倍作为统计开始时间，前4 个字节为统计起始时间秒值，后2 个字节保留</td>
</tr><tr>
<td>2 </td>
<td>统计结束时间</td>
<td>6 </td>
<td>-</td>
<td>以统计周期的整数倍作为统计结束时间，前4 个字节为统计结束时间秒值，后2 个字节保留</td>
</tr><tr>
<td>3 </td>
<td>检测通道数</td>
<td>1 </td>
<td>1~128</td>
<td>统计数据对应的检测通道数，记为N </td>
</tr><tr>
<td>4 </td>
<td>单路检测通道<br>非机动车检测统计数据</td>
<td>13 </td>
<td>-</td>
<td>应符合表B . 72 的规定</td>
</tr><tr>
<td colspan="5">······</td>
</tr><tr>
<td>3+N</td>
<td>单路检测通道<br>非机动车检测统计数据</td>
<td>13 </td>
<td>-</td>
<td>应符合表B . 72 的规定</td>
</tr></table>

**表B.72 单路检测通道非机动车检测统计信息**

<table border="1" ><tr>
<td>序号</td>
<td>名称</td>
<td>字节数</td>
<td>取值</td>
<td>说明</td>
</tr><tr>
<td>1 </td>
<td>检测通道编号</td>
<td>1 </td>
<td>1~128</td>
<td>标识交通信号控制机与车辆检测器通信的检测通道号</td>
</tr><tr>
<td>2 </td>
<td>非机动车总量</td>
<td>2 </td>
<td>0~65 535 </td>
<td>统计周期内检测区域非机动车总的数量，当数量超过65 535 时，取值65 535 </td>
</tr><tr>
<td>3 </td>
<td>平均非机动车占有率</td>
<td>2 </td>
<td>0~1000</td>
<td>检测区域内非机动车空间占有比率的平均值，以0 . 1 ％计</td>
</tr><tr>
<td>4 </td>
<td>其他</td>
<td>8 </td>
<td>-</td>
<td>保留字节</td>
</tr></table>

<!-- 27 -->

<!-- **GB/T 43229-2023** -->

##### B.11.3 非机动车检测统计数据主动上传应答

非机动车检测统计数据主动上传应答信息格式应符合表B.73的规定。

**表B.73 非机动车检测统计数据主动上传应答**

<table border="1" ><tr>
<td>名称</td>
<td>链路地址</td>
<td>发送方标识</td>
<td>接收方标识</td>
<td>协议版本</td>
<td>操作类型</td>
<td>对象标识</td>
<td>消息内容</td>
</tr><tr>
<td>内容</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>0x85 </td>
<td>0x0702 </td>
<td>无</td>
</tr></table>

##### B.11.4 非机动车检测历史数据查询

非机动车检测历史数据查询信息格式应符合表B.74的规定。

**表B.74 非机动车检测历史数据查询**

<table border="1" ><tr>
<td>名称</td>
<td>链路地址</td>
<td>发送方标识</td>
<td>接收方标识</td>
<td>协议版本</td>
<td>操作类型</td>
<td>对象标识</td>
<td>消息内容</td>
</tr><tr>
<td>内容</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>0x80 </td>
<td>0x0703 </td>
<td>应符合表B . 43 的规定</td>
</tr></table>

##### B.11.5 非机动车检测历史数据查询应答

非机动车检测历史数据查询应答信息格式应符合表B.75的规定。

表B.75 **历史数据查询应答**

<table border="1" ><tr>
<td>名称</td>
<td>链路地址</td>
<td>发送方标识</td>
<td>接收方标识</td>
<td>协议版本</td>
<td>操作类型</td>
<td>对象标识</td>
<td>消息内容</td>
</tr><tr>
<td>内容</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>0x83 </td>
<td>0x0703 </td>
<td>应符合表B . 76 的规定</td>
</tr></table>

**表B.76 历史统计数据**

<table border="1" ><tr>
<td>序号</td>
<td>名称</td>
<td>字节数</td>
<td>取值</td>
<td>说明</td>
</tr><tr>
<td>1 </td>
<td>历史数据流水号</td>
<td>2 </td>
<td>1~65 535 </td>
<td>每发送一帧数据包取值加1 , 65535 加1 后流水号复位为1 ，每次重新联机后应复位为1 </td>
</tr><tr>
<td>2 </td>
<td>统计数据</td>
<td>-</td>
<td>-</td>
<td>应符合表B . 71 的规定</td>
</tr></table>

**B.12 错误应答信息**

错误应答信息格式应符合表B.77的规定。

表B.77 **错误应答信息**

<table border="1" ><tr>
<td>名称</td>
<td>链路地址</td>
<td>发送方标识</td>
<td>接收方标识</td>
<td>协议版本</td>
<td>操作类型</td>
<td>对象标识</td>
<td>消息内容</td>
</tr><tr>
<td>内容</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>0x86 </td>
<td>-</td>
<td>应符合表B . 78 的规定</td>
</tr></table>

<!-- 28 -->

<!-- GB/T 43229-2023 -->

**表B.78** **错误消息**

<table border="1" ><tr>
<td>序号</td>
<td>名称</td>
<td>字节数</td>
<td>取值</td>
<td>说明</td>
</tr><tr>
<td>1 </td>
<td>错误类型</td>
<td>1 </td>
<td>1~255</td>
<td>错误类型，取值如下：<br>1 ：帧开始错误；<br>2 ：帧结束错误；<br>3 ：校验码错误；<br>4 ：链路地址错误；<br>5 ：协议版本不兼容；<br>6 ：操作类型错误；<br>7 ：对象标识错误；<br>8 ~127 ：用户自定义的其他消息格式错误；<br>128 ：消息内容错误；<br>129 ~255 ：用户自定义的其他消息内容错误</td>
</tr></table>

<!-- 29 -->

<!-- **GB/T** 43229-2023 -->

### 附录C

### （资料性）

# 交通信号控制机与行人检测器间通信协议

## C.1 消息内容

行人检测器数据的消息类型、操作类型、通信规程见表C.1。

**表C.1 行人检测器消息内容**

<table border="1" ><tr>
<td>序号</td>
<td>消息类型</td>
<td>操作类型</td>
<td>通信规程</td>
<td>说明</td>
</tr><tr>
<td>1 </td>
<td rowspan="5">行人检测信息</td>
<td>实时信息主动<br>上传</td>
<td>主动上报（无应答）</td>
<td>行人检测器按照实时信息上传周期主动上传行人检测信息，信息格式见表C . 2 </td>
</tr><tr>
<td>2 </td>
<td>统计数据主动上传</td>
<td rowspan="2">主动上报（有应答）</td>
<td>一个统计周期结束后行人检测器主动上传该周期的行人检测统计数据，信息格式见表C . 7 </td>
</tr><tr>
<td>3 </td>
<td>统计数据主动<br>上传应答</td>
<td>交通信号控制机收到行人检测器主动上传的行人检测统计数据后应答，信息格式见表C . 12 </td>
</tr><tr>
<td>4 </td>
<td>历史数据查询</td>
<td rowspan="2">信息查询</td>
<td>交通信号控制机发送，信息格式见表C . 13 </td>
</tr><tr>
<td>5 </td>
<td>历史数据查询应答</td>
<td>行人检测器收到历史数据查询消息后应答，信息格式见表C . 14 </td>
</tr></table>

## C.2 信息格式

### C.2.1 行人检测实时信息主动上传

行人检测实时信息主动上传信息格式见表C.2。

**表C.2 行人检测实时信息主动上传**

<table border="1" ><tr>
<td>名称</td>
<td>链路地址</td>
<td>发送方标识</td>
<td>接收方标识</td>
<td>协议版本</td>
<td>操作类型</td>
<td>对象标识</td>
<td>消息内容</td>
</tr><tr>
<td>内容</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>0x82 </td>
<td>0x0801 </td>
<td>见表C . 3 </td>
</tr></table>

**表C.3 行人检测实时信息**

<table border="1" ><tr>
<td>序号</td>
<td>名称</td>
<td>字节数</td>
<td>取值</td>
<td>说明</td>
</tr><tr>
<td>1 </td>
<td>行人检测实时信息生成本地时间</td>
<td>6 </td>
<td>-</td>
<td>前4 个字节为当前地方时秒值，后2 个字节为地方时毫秒值</td>
</tr><tr>
<td>2 </td>
<td>检测通道数</td>
<td>1 </td>
<td>1~128</td>
<td>当前有效的检测通道数，记为N </td>
</tr><tr>
<td>3 </td>
<td>单路检测通道<br>行人检测实时信息</td>
<td>-</td>
<td>-</td>
<td>见表C . 4 </td>
</tr><tr>
<td colspan="5">······</td>
</tr><tr>
<td>2+N</td>
<td>单路检测通道<br>行人检测实时信息</td>
<td>-</td>
<td>-</td>
<td>见表C . 4 </td>
</tr></table>

<!-- 30 -->

<!-- **GB/T** 43229-2023 -->

**表C.4 单路检测通道行人检测实时信息**

<table border="1" ><tr>
<td>序号</td>
<td>名称</td>
<td>字节数</td>
<td>取值</td>
<td>说明</td>
</tr><tr>
<td>1 </td>
<td>检测通道编号</td>
<td>1 </td>
<td>1~128</td>
<td>标识交通信号控制机与车辆检测器通信的检测通道号</td>
</tr><tr>
<td>2 </td>
<td>行人检测区域</td>
<td>1 </td>
<td>1~2</td>
<td>该通道行人检测区域类型，其中：<br>1 ：等待区检测；<br>2 ：人行横道线检测</td>
</tr><tr>
<td>3 </td>
<td>行人检测实时信息</td>
<td>4 </td>
<td>-</td>
<td>若为等待区行人检测，见表C . 5 ；<br>若为人行横道线行人检测，见表C . 6 </td>
</tr><tr>
<td>4 </td>
<td>其他</td>
<td>8 </td>
<td>-</td>
<td>保留字节</td>
</tr></table>

**表C.5 等待区行人检测实时信息**

<table border="1" ><tr>
<td>序号</td>
<td>名称</td>
<td>字节数</td>
<td>取值</td>
<td>说明</td>
</tr><tr>
<td>1 </td>
<td>行人数量</td>
<td>1 </td>
<td>0~255</td>
<td>行人过街等待区人数，取值255 表示溢出</td>
</tr><tr>
<td>2 </td>
<td>行人占有率</td>
<td>2 </td>
<td>0~1 000 </td>
<td>等待区行人空间占有率，以0 . 1 ％计</td>
</tr><tr>
<td>3 </td>
<td>行人等待时间</td>
<td>1 </td>
<td>0~255</td>
<td>如果等待区有行人进入，开始计算行人等待时间；如果行人离开等待区进入人行横道线或等待区无人，则结束计算行人等待时间，单位为秒（s )，取值255 表示溢出</td>
</tr></table>

**表C.6 人行横道线行人检测实时信息**

<table border="1" ><tr>
<td>序号</td>
<td>名称</td>
<td>字节数</td>
<td>取值</td>
<td>说明</td>
</tr><tr>
<td>1 </td>
<td>行人数量</td>
<td>1 </td>
<td>0~255</td>
<td>行人过街人行横道线上的人数，取值255 表示溢出</td>
</tr><tr>
<td>2 </td>
<td>行人占有率</td>
<td>2 </td>
<td>0~1000</td>
<td>人行横道线行人空间占有率，以0 . 1 ％计</td>
</tr><tr>
<td>3 </td>
<td>上行方向人数</td>
<td>1 </td>
<td>0~255</td>
<td>取值255 表示溢出；<br>上行方向指以地理正北方向为起点，顺时针旋转到行人在人行横道线上行走方向的角度为0°~180°（包括0°，不包括180°）</td>
</tr><tr>
<td>4 </td>
<td>下行方向人数</td>
<td>1 </td>
<td>0~255</td>
<td>取值255 表示溢出；<br>下行方向指以地理正北方向为起点，顺时针旋转到行人在人行横道线上行走方向的角度为180 °~360 °（包括180 °，不包括360 °）</td>
</tr></table>

### C.2.2 行人检测统计数据主动上传

行人检测统计数据主动上传信息格式见表C.7。

**表C.7 行人检测统计数据主动上传表**

<table border="1" ><tr>
<td>名称</td>
<td>链路地址</td>
<td>发送方标识</td>
<td>接收方标识</td>
<td>协议版本</td>
<td>操作类型</td>
<td>对象标识</td>
<td>消息内容</td>
</tr><tr>
<td>内容</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>0x82 </td>
<td>0x0802 </td>
<td>见表C . 8 </td>
</tr></table>

<!-- 31 -->

<!-- GB/T 43229-2023 -->

**表C.8 行人检测统计数据**

<table border="1" ><tr>
<td>序号</td>
<td>名称</td>
<td>字节数</td>
<td>取值</td>
<td>说明</td>
</tr><tr>
<td>1 </td>
<td>统计起始时间</td>
<td>6 </td>
<td>-</td>
<td>以统计周期的整数倍作为统计开始时间，前4 个字节为统计起始时间秒值，后2 个字节保留</td>
</tr><tr>
<td>2 </td>
<td>统计结束时间</td>
<td>6 </td>
<td>-</td>
<td>以统计周期的整数倍作为统计结束时间，前4 个字节为统计结束时间秒值，后2 个字节保留</td>
</tr><tr>
<td>3 </td>
<td>检测通道数</td>
<td>1 </td>
<td>1~128</td>
<td>统计数据对应的检测通道数，记为N </td>
</tr><tr>
<td>4 </td>
<td>单路检测通道<br>行人检测统计数据</td>
<td>-</td>
<td>-</td>
<td>见表C . 9 </td>
</tr><tr>
<td colspan="5">······</td>
</tr><tr>
<td>3+N</td>
<td>单路检测通道<br>行人检测统计数据</td>
<td>-</td>
<td>-</td>
<td>见表C . 9 </td>
</tr></table>

**表C.9 单路检测通道行人检测统计数据**

<table border="1" ><tr>
<td>序号</td>
<td>名称</td>
<td>字节数</td>
<td>取值</td>
<td>说明</td>
</tr><tr>
<td>1 </td>
<td>检测通道编号</td>
<td>1 </td>
<td>1~128</td>
<td>标识交通信号控制机与车辆检测器通信的检测通道号</td>
</tr><tr>
<td>2 </td>
<td>行人检测区域</td>
<td>1 </td>
<td>1~2</td>
<td>该通道行人检测区域类型，其中：<br>1 ：等待区检测；<br>2 ：人行横道线检测</td>
</tr><tr>
<td>3 </td>
<td>行人检测统计信息</td>
<td>-</td>
<td>-</td>
<td>若为等待区行人检测，见表C . 10 ；<br>若为人行横道线行人检测，见表C . 11 </td>
</tr><tr>
<td>4 </td>
<td>其他</td>
<td>8 </td>
<td>-</td>
<td>保留字节</td>
</tr></table>

**表C.10 等待区行人检测统计数据**

<table border="1" ><tr>
<td>序号</td>
<td>名称</td>
<td>字节数</td>
<td>取值</td>
<td>说明</td>
</tr><tr>
<td>1 </td>
<td>行人总量</td>
<td>2 </td>
<td>0~65 535 </td>
<td>取值65535 表示溢出</td>
</tr><tr>
<td>2 </td>
<td>平均行人占有率</td>
<td>2 </td>
<td>0~1000</td>
<td>算术平均值，以0 . 1 ％计</td>
</tr><tr>
<td>3 </td>
<td>平均行人等待时间</td>
<td>1 </td>
<td>0~255</td>
<td>算术平均值，单位为秒（s )，取值255 表示溢出</td>
</tr></table>

表C.11 **人行横道线行人检测统计数据**

<table border="1" ><tr>
<td>序号</td>
<td>名称</td>
<td>字节数</td>
<td>取值</td>
<td>说明</td>
</tr><tr>
<td>1 </td>
<td>行人总量</td>
<td>2 </td>
<td>0~65 535 </td>
<td>取值65535 表示溢出</td>
</tr><tr>
<td>2 </td>
<td>平均行人占有率</td>
<td>2 </td>
<td>0~1000</td>
<td>算术平均值，以0 . 1 ％计</td>
</tr><tr>
<td>3 </td>
<td>上行方向人数</td>
<td>2 </td>
<td>0~65 535 </td>
<td>取值65535 表示溢出</td>
</tr><tr>
<td>4 </td>
<td>下行方向人数</td>
<td>2 </td>
<td>0~65 535 </td>
<td>取值65535 表示溢出</td>
</tr></table>

<!-- 32 -->

<!-- **GB/T** 43229-2023 -->

### C.2.3 行人检测统计数据主动上传应答

行人检测统计数据主动上传应答信息格式见表C.12。

**表C.12 行人检测统计数据主动上传应答**

<table border="1" ><tr>
<td>名称</td>
<td>链路地址</td>
<td>发送方标识</td>
<td>接收方标识</td>
<td>协议版本</td>
<td>操作类型</td>
<td>对象标识</td>
<td>消息内容</td>
</tr><tr>
<td>内容</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>0x85 </td>
<td>0x0802 </td>
<td>无</td>
</tr></table>

### C.2.4 行人检测历史数据查询

行人检测历史数据查询信息格式见表C.13。

**表C.13 行人检测历史数据查询**

<table border="1" ><tr>
<td>名称</td>
<td>链路地址</td>
<td>发送方标识</td>
<td>接收方标识</td>
<td>协议版本</td>
<td>操作类型</td>
<td>对象标识</td>
<td>消息内容</td>
</tr><tr>
<td>内容</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>0x80 </td>
<td>0x0803 </td>
<td>见表B.43 </td>
</tr></table>

### C.2.5 行人检测历史数据查询应答

行人检测历史数据查询应答信息格式见表C.14。

**表C.14 历史数据查询应答**

<table border="1" ><tr>
<td>名称</td>
<td>链路地址</td>
<td>发送方标识</td>
<td>接收方标识</td>
<td>协议版本</td>
<td>操作类型</td>
<td>对象标识</td>
<td>消息内容</td>
</tr><tr>
<td>内容</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>-</td>
<td>0x83 </td>
<td>0x0803 </td>
<td>见表C.15 </td>
</tr></table>

**表C.15 历史统计数据**

<table border="1" ><tr>
<td>序号</td>
<td>名称</td>
<td>字节数</td>
<td>取值</td>
<td>说明</td>
</tr><tr>
<td>1 </td>
<td>历史数据流水号</td>
<td>2 </td>
<td>1~65 535 </td>
<td>每发送一帧数据包取值加1 , 65535 加1 后流水号复位为1 ，每次重新联机后复位为1 </td>
</tr><tr>
<td>2 </td>
<td>统计数据</td>
<td>-</td>
<td>-</td>
<td>见表C . 8 </td>
</tr></table>

<!-- 33 -->

<!-- **GB/T** 43229-2023 -->

## 参考文献

［1] GB 25280-2016 道路交通信号控制机

［2] GB/T 34428.2-2017 高速公路监控设施通信规程 第2部分：车辆检测器

［3] GB/T 37987-2019 机动车电子标识读写设备应用接口规范

［4] GA/T 1049.2-2013 公安交通集成指挥平台通信协议 第2部分：交通信号控制系统

［5] GA/T 1743-2020 道路交通信号控制机信息发布接口规范

［6］美国国家智能运输系统通信协议（NTCIP）

<!-- 34 -->

